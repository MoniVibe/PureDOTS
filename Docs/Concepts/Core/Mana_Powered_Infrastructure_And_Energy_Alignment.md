# Mana-Powered Infrastructure and Energy Alignment

**Status:** Concept
**Category:** Core - Energy Systems, Infrastructure, Magic
**Scope:** Buildings → Entities → Tools → Networks
**Created:** 2025-12-21
**Last Updated:** 2025-12-21

---

## Purpose

**Primary Goal:** Enable mana as a first-class energy resource that powers buildings, tools, entities, and infrastructure, with alignment variants (Fel, Mana, Arcane) representing different forms of magical energy.

**Secondary Goals:**
- Treat mana as equivalent to power (parallel energy systems)
- Support mana-powered buildings, batteries, and infrastructure
- Enable energy alignment system (Fel = corrupt, Mana = neutral, Arcane = pure)
- Integrate with existing power systems (mana and power can coexist)
- Support alignment-based energy interactions (compatibility, conversion, conflicts)

---

## System Overview

### Key Insight

**Mana is an energy resource just like power, with alignment variants.**

- **Energy Equivalence:** Mana and power are both energy resources (can power same systems)
- **Alignment Variants:** Mana has alignment forms (Fel, Mana, Arcane)
- **Infrastructure:** Buildings, batteries, tools, and entities can be mana-powered
- **Parallel Systems:** Mana and power can coexist (entities can use either or both)
- **Alignment Interactions:** Different alignments have compatibility, conversion, and conflict rules

**Example Emergence:**
- Player builds mana-powered workshop → workshop requires mana to operate → mana battery stores energy → tools powered by mana → entities can use mana-powered equipment
- Fel-powered buildings → corrupt energy → may corrupt entities/systems
- Arcane-powered buildings → pure energy → enhances pure entities/systems
- Mana (neutral) → compatible with all systems

---

## Energy Alignment System

### Pure Alignment Variants

**Energy can have alignment** - different forms of energy with different properties and interactions.

**Mana Alignment Variants (Pure):**

**1. Fel (Corrupt Energy)**
- **Alignment:** Corrupt (Pure Fel)
- **Nature:** Destructive, chaotic, corrupting
- **Properties:** High power density, corruption effects, unstable
- **Use Cases:** Dark magic, destructive spells, corrupt buildings
- **Risks:** Corruption spread, instability, entity corruption

**2. Mana (Neutral Energy)**
- **Alignment:** Neutral (Pure Mana)
- **Nature:** Balanced, stable, versatile
- **Properties:** Standard power density, no alignment effects, stable
- **Use Cases:** General magic, standard buildings, neutral systems
- **Risks:** None (neutral energy)

**3. Arcane (Pure Energy)**
- **Alignment:** Pure (Pure Arcane)
- **Nature:** Orderly, enhancing, purifying
- **Properties:** High efficiency, purity effects, stable
- **Use Cases:** Light magic, pure buildings, enhancing systems
- **Risks:** Low (pure energy is stable)

**Power Alignment Variants (Pure, if implemented):**

**4. Electricity/Power (Neutral Energy)**
- **Alignment:** Neutral (Pure Power/Electricity)
- **Nature:** Standard, technical, neutral
- **Properties:** Standard efficiency, no alignment effects, stable
- **Use Cases:** General power systems, technical buildings, neutral systems
- **Risks:** None (neutral energy)

---

### Hybrid Alignments

**Alignments can be blended** - energy can have multiple alignment components creating hybrid alignments.

**Hybrid Alignment Examples:**

**1. Fel-Mana (Corrupt-Neutral Hybrid)**
- **Composition:** Blend of Fel + Mana (e.g., 70% Fel + 30% Mana)
- **Nature:** Destructive with stability, corrupting but neutralized somewhat
- **Properties:** High power density (Fel), reduced corruption (Mana neutralizes), moderate stability
- **Use Cases:** Stable dark magic, controlled corrupt buildings, balanced destructive systems
- **Effects:** Corruption effects reduced compared to pure Fel, more stable than pure Fel

**2. Fel-Arcane (Corrupt-Pure Hybrid)**
- **Composition:** Blend of Fel + Arcane (e.g., 60% Fel + 40% Arcane)
- **Nature:** Conflicting destructive and enhancing forces
- **Properties:** Variable power density, conflicting effects (corruption vs purity), unstable
- **Use Cases:** Experimental systems, chaos magic, volatile constructs
- **Effects:** Opposing effects conflict, reduced efficiency, high instability

**3. Fel-Electricity (Corrupt-Power Hybrid)**
- **Composition:** Blend of Fel + Electricity/Power (e.g., 80% Fel + 20% Power)
- **Nature:** Corrupt energy with technical efficiency
- **Properties:** High power density (Fel), technical enhancement (Power), moderate stability
- **Use Cases:** Corrupt power systems, dark tech, fel-powered machines
- **Effects:** Corruption effects with technical reliability

**4. Mana-Electricity (Neutral-Power Hybrid)**
- **Composition:** Blend of Mana + Electricity/Power (e.g., 50% Mana + 50% Power)
- **Nature:** Balanced neutral energy, technical and magical
- **Properties:** Standard efficiency, no alignment effects, stable
- **Use Cases:** Hybrid magic-tech systems, versatile buildings, balanced infrastructure
- **Effects:** Neutral energy, versatile, stable operation

**5. Arcane-Mana (Pure-Neutral Hybrid)**
- **Composition:** Blend of Arcane + Mana (e.g., 60% Arcane + 40% Mana)
- **Nature:** Enhancing with neutrality, pure but balanced
- **Properties:** High efficiency (Arcane), reduced purity effects (Mana neutralizes), stable
- **Use Cases:** Balanced light magic, stable pure buildings, controlled enhancement
- **Effects:** Purity effects reduced compared to pure Arcane, more stable than pure Arcane

**6. Arcane-Electricity (Pure-Power Hybrid)**
- **Composition:** Blend of Arcane + Electricity/Power (e.g., 70% Arcane + 30% Power)
- **Nature:** Pure energy with technical efficiency
- **Properties:** High efficiency (Arcane), technical enhancement (Power), stable
- **Use Cases:** Pure power systems, light tech, arcane-powered machines
- **Effects:** Purity effects with technical reliability

**Flexible Hybrid Creation:**
- **Any Combination:** Players can blend any alignments in any ratio
- **Percentage-Based:** Hybrids defined by percentage composition (e.g., 70% Fel + 30% Mana)
- **Blended Properties:** Properties blend proportionally (weighted average)
- **Performance Scaling:** Performance scales based on alignment match with target system

---

**Power Alignment Variants (Optional):**

**Note:** Power may remain neutral, or may have alignment variants similar to mana.

**If Power Has Alignment:**

**1. Coal/Evil Power**
- **Alignment:** Evil (destructive, harmful)
- **Nature:** Polluting, destructive, inefficient
- **Properties:** High waste, pollution effects, cheap
- **Use Cases:** Low-tech systems, temporary power, emergency backup

**2. Wind/Corrupt Power**
- **Alignment:** Corrupt (inefficient, wasteful)
- **Nature:** Inefficient, unreliable, wasteful
- **Properties:** Low efficiency, variable output, resource waste
- **Use Cases:** Early tech, inefficient systems, unreliable power

**3. Fusion/Pure Power**
- **Alignment:** Pure (efficient, clean)
- **Nature:** Efficient, clean, advanced
- **Properties:** High efficiency, clean output, stable
- **Use Cases:** Advanced tech, efficient systems, reliable power

**4. Neutral Power**
- **Alignment:** Neutral
- **Nature:** Standard, no alignment effects
- **Properties:** Standard efficiency, no alignment effects
- **Use Cases:** General systems, neutral buildings

---

### Alignment Compatibility (Flexible System with Hybrids)

**All alignments (pure and hybrid) can power all systems** - compatibility affects efficiency, stability, and effects rather than hard restrictions.

**Pure Alignment Compatibility:**

**Matching Alignment (Same Pure Alignment):**
- **Efficiency:** 100% (optimal)
- **Stability:** High (stable operation)
- **Effects:** Alignment effects amplified (Fel corruption, Arcane purity, Mana neutral)
- **Example:** Pure Fel-powered Fel building = optimal efficiency, stable, corruption amplified

**Neutral Alignment (Pure Mana or Pure Power):**
- **Efficiency:** 90-100% (near-optimal, slight neutralization)
- **Stability:** High (stable operation)
- **Effects:** Neutralizes alignment effects somewhat (reduces corruption/purity)
- **Example:** Pure Mana-powered Fel building = 95% efficiency, stable, reduced corruption

**Opposing Alignment (Fel ↔ Arcane):**
- **Efficiency:** 60-80% (reduced efficiency, energy conflict)
- **Stability:** Low-Medium (unstable, may fluctuate)
- **Effects:** Opposing effects conflict (corruption vs purity, may create instability)
- **Example:** Pure Fel-powered Arcane building = 70% efficiency, unstable operation, conflicting effects

**Hybrid Alignment Compatibility:**

**Hybrid with Matching Component:**
- **Efficiency:** 90-100% (scaled by matching component percentage)
- **Stability:** Medium-High (blended stability)
- **Effects:** Effects blend proportionally (e.g., Fel-Mana = corruption + neutralization)
- **Example:** Fel-Mana (70% Fel + 30% Mana) on Fel building = 95% efficiency, moderate stability, reduced corruption

**Hybrid with Neutral Component:**
- **Efficiency:** 85-95% (neutral component stabilizes)
- **Stability:** High (neutral component provides stability)
- **Effects:** Neutral component reduces alignment effects (e.g., Fel-Mana = reduced corruption)
- **Example:** Fel-Mana (60% Fel + 40% Mana) on Arcane building = 85% efficiency, stable, moderate conflict

**Hybrid with Opposing Components:**
- **Efficiency:** 65-80% (conflicting components reduce efficiency)
- **Stability:** Low-Medium (conflicting components create instability)
- **Effects:** Opposing effects conflict (e.g., Fel-Arcane = corruption vs purity conflict)
- **Example:** Fel-Arcane (50% Fel + 50% Arcane) on any building = 75% efficiency, unstable, high conflict

**Flexible Compatibility Formula (with Hybrids):**
```
// Calculate compatibility for hybrid alignments
CompatibilityFactor = 
    Σ(ComponentPercentage × ComponentCompatibility) × StabilityPenalty

Where:
  ComponentPercentage = percentage of each alignment in hybrid (e.g., 0.7 Fel, 0.3 Mana)
  ComponentCompatibility = compatibility of each component (1.0 same, 0.95 neutral, 0.75 opposing)
  StabilityPenalty = 1.0 (stable) to 0.8 (unstable, based on conflicting components)
  
Example:
  Fel-Mana (70% Fel + 30% Mana) on Fel building:
    Fel component: 0.7 × 1.0 = 0.7 (70% efficiency from matching)
    Mana component: 0.3 × 0.95 = 0.285 (28.5% efficiency from neutral)
    Total: 0.7 + 0.285 = 0.985 (98.5% efficiency)
    Stability: High (Mana stabilizes Fel)
  
  Fel-Arcane (50% Fel + 50% Arcane) on any building:
    Fel component: 0.5 × 0.75 = 0.375 (conflicting)
    Arcane component: 0.5 × 0.75 = 0.375 (conflicting)
    Total: 0.375 + 0.375 = 0.75 (75% efficiency)
    Stability: Low (opposing components conflict)
  
FinalEfficiency = RequiredEfficiency × CompatibilityFactor
FinalStability = BaseStability × StabilityPenalty
```

**Player Flexibility:**
- **Any alignment can power any system** (no hard blocks)
- **Players choose trade-offs:** Efficiency vs. effects vs. stability
- **Creative combinations:** Players can experiment with alignment mismatches
- **World crafting:** Players craft their own energy systems and balance

---

### Alignment Conversion (Optional)

**Energy alignment can be converted** (with losses and costs), but conversion is optional - players can use mismatched alignments directly.

**Conversion Rules (If Desired):**

**Fel ↔ Mana:**
- **Fel → Mana:** Requires purification (expensive, slow, 60-80% efficiency)
- **Mana → Fel:** Requires corruption (cheap, fast, 80-95% efficiency)
- **Use Case:** Neutralize corrupt energy, create corrupt energy
- **Alternative:** Use Fel directly on Mana systems (with efficiency/stability penalties)

**Mana ↔ Arcane:**
- **Mana → Arcane:** Requires purification (moderate cost, moderate speed, 70-85% efficiency)
- **Arcane → Mana:** Requires neutralization (cheap, fast, 90-98% efficiency)
- **Use Case:** Enhance energy purity, neutralize pure energy
- **Alternative:** Use Arcane directly on Mana systems (works fine, slight efficiency loss)

**Fel ↔ Arcane:**
- **Fel → Arcane:** Requires full purification (very expensive, very slow, 40-60% efficiency)
- **Arcane → Fel:** Requires corruption (expensive, slow, 50-70% efficiency)
- **Use Case:** Extreme conversion (if players want to avoid mismatched usage)
- **Alternative:** Use Fel directly on Arcane systems (70% efficiency, unstable, conflicting effects)

**Conversion Efficiency (If Conversion Chosen):**
```
ConversionEfficiency = BaseEfficiency × AlignmentDistancePenalty

Where:
  BaseEfficiency = 0.6-0.95 (depends on conversion type)
  AlignmentDistancePenalty = 1.0 - (AlignmentDistance × 0.1)
  
Example:
  Fel → Arcane (maximum distance):
    BaseEfficiency = 0.5
    AlignmentDistance = 2 (Fel to Arcane)
    Penalty = 1.0 - (2 × 0.1) = 0.8
    FinalEfficiency = 0.5 × 0.8 = 0.4 (40%)
```

**Hybrid Alignment Conversion:**
- **Blending:** Players can blend alignments to create hybrid energy (e.g., mix Fel + Mana generators)
- **Partial Conversion:** Convert alignment partially (e.g., convert 50% Fel to Mana, keep 50% Fel = Fel-Mana hybrid)
- **Gradual Conversion:** Convert alignment gradually over time (e.g., slowly convert Fel to Mana)
- **Direct Mixing:** Mix different alignment sources directly (e.g., Fel generator + Mana generator = Fel-Mana hybrid)

**Player Choice:**
- **Convert or Use Directly:** Players choose whether to convert alignment or use mismatched energy
- **Create Hybrids:** Players can blend alignments to create hybrid energy (Fel-Mana, Fel-Arcane, etc.)
- **Conversion Trade-off:** Conversion costs resources but provides optimal efficiency/stability
- **Direct Usage Trade-off:** Direct usage saves resources but has efficiency/stability penalties
- **Hybrid Trade-off:** Hybrids provide balanced properties (e.g., Fel-Mana = corruption + stability)
- **Flexibility:** Players craft their own approach based on world design

---

## Mana as Energy Resource

### Mana Energy Properties

**Mana is a first-class energy resource** with similar properties to power.

**Energy Characteristics:**
- **Unit:** Mana Points (MP) or Mana Watts (MW) for power-equivalent
- **Generation:** Generated from various sources (prayers, ley lines, generators, batteries)
- **Storage:** Stored in mana batteries (similar to power batteries)
- **Distribution:** Distributed through mana conduits (similar to power conduits)
- **Consumption:** Consumed by buildings, tools, entities, systems

**Energy Equivalence:**
```
1 Mana = 1 Power (for energy calculations)
- Buildings can use either mana or power (or both)
- Tools can use either mana or power (or both)
- Entities can use either mana or power (or both)
- Conversion possible (mana ↔ power, with efficiency losses)
```

---

### Mana Generation

**Mana is generated from various sources:**

**1. Prayer/Divine Sources**
- **Rate:** Variable (depends on worship, faith, followers)
- **Alignment:** Determined by deity/faith alignment
- **Example:** Prayer power → mana generation

**2. Ley Lines/Natural Sources**
- **Rate:** Steady (depends on ley line strength, location)
- **Alignment:** Determined by ley line alignment (can be neutral, pure, or corrupt)
- **Example:** Ley line → mana generator → mana output

**3. Mana Generators**
- **Rate:** Steady (depends on generator type, efficiency)
- **Alignment:** Determined by generator design (can produce specific alignment)
- **Example:** Mana generator building → mana output

**4. Mana Batteries (Discharge)**
- **Rate:** Variable (depends on battery capacity, discharge rate)
- **Alignment:** Preserves alignment of stored mana
- **Example:** Mana battery → discharge → mana output

---

### Mana Storage (Mana Batteries)

**Mana batteries store mana** for later use (similar to power batteries).

**Battery Properties:**

**1. Capacity**
- **Maximum Storage:** Mana capacity (MP or MW-hours)
- **Current Storage:** Current mana stored (0 to capacity)
- **Efficiency:** Storage efficiency (95-99%, some loss during storage)

**2. Charge/Discharge**
- **Charge Rate:** Rate at which battery charges (MP/sec or MW)
- **Discharge Rate:** Rate at which battery discharges (MP/sec or MW)
- **Efficiency:** Charge/discharge efficiency (85-95%, some loss)

**3. Alignment Preservation**
- **Alignment Storage:** Batteries preserve alignment of stored mana
- **Fel Battery:** Stores Fel energy (corrupt)
- **Mana Battery:** Stores Mana energy (neutral)
- **Arcane Battery:** Stores Arcane energy (pure)
- **Mixed Storage:** Some batteries can store multiple alignments (separate compartments)

**4. Self-Discharge**
- **Rate:** Batteries lose energy over time (self-discharge)
- **Fel Batteries:** Higher self-discharge (unstable, 5-10% per day)
- **Mana Batteries:** Standard self-discharge (stable, 1-2% per day)
- **Arcane Batteries:** Lower self-discharge (very stable, 0.5-1% per day)

---

### Mana Distribution Infrastructure

**Mana is distributed through infrastructure** (pylons, poles, cables, conduits) with detailed material and construction quality mechanics.

**Distribution Infrastructure Types:**

**1. Overhead Distribution (Pylons/Poles)**
- **Structure:** Pylons (large, high-capacity) or Poles (small, local distribution)
- **Support:** Towers/poles support cables/wires above ground
- **Capacity:** High capacity, exposed to environmental hazards
- **Cost:** Moderate cost, visible infrastructure

**2. Underground Distribution (Cables)**
- **Structure:** Cables buried underground
- **Support:** Protected from environmental hazards
- **Capacity:** Moderate-high capacity, protected infrastructure
- **Cost:** Higher cost, less visible

**3. Substations**
- **Structure:** Distribution hubs that connect different network segments
- **Function:** Voltage/flow regulation, network routing, isolation
- **Quality:** Substation quality affects overall network efficiency

**4. Repeaters/Amplifiers**
- **Structure:** Signal/power amplifiers along distribution lines
- **Function:** Boost signal/power over long distances, reduce losses
- **Quality:** Repeater quality affects signal amplification and loss reduction

---

### Distribution Loss Mechanics

**Energy loses power during transmission** - losses depend on multiple factors.

**Loss Calculation:**
```
TotalLoss = ResistanceLoss + AlignmentLoss + EnvironmentalLoss + DistanceLoss + QualityLoss

Where:
  ResistanceLoss = BaseResistance × Distance × WireConductivityFactor
  AlignmentLoss = AlignmentInstabilityFactor × Distance × AlignmentType
  EnvironmentalLoss = EnvironmentalHazardFactor × ExposureTime
  DistanceLoss = BaseDistanceLoss × Distance² (quadratic scaling)
  QualityLoss = MaterialQualityPenalty + ConstructionQualityPenalty + MethodologyPenalty
```

**1. Resistance Loss (Wire Material & Quality)**
```
ResistanceLoss = BaseResistance × Distance × (1 / WireConductivity)

Where:
  BaseResistance = 0.05-0.15 (5-15% base loss per unit distance)
  Distance = Transmission distance (units)
  WireConductivity = Wire material conductivity factor (0.5-1.0)
  
Wire Materials (examples):
  Copper (High Quality): 0.95 conductivity (5% resistance loss per unit distance)
  Copper (Low Quality): 0.85 conductivity (15% resistance loss)
  Aluminum (High Quality): 0.80 conductivity (20% resistance loss)
  Aluminum (Low Quality): 0.70 conductivity (30% resistance loss)
  Silver (High Quality): 0.98 conductivity (2% resistance loss, expensive)
  Hybrid Mana Conductor (High Quality): 0.90 conductivity (10% resistance loss, alignment-preserving)
  
Production Quality Multiplier:
  Excellent Production: 1.0× (no penalty)
  Good Production: 0.95× (5% additional loss)
  Standard Production: 0.90× (10% additional loss)
  Poor Production: 0.80× (20% additional loss)
```

**2. Alignment Loss (Alignment Instability)**
```
AlignmentLoss = AlignmentInstabilityFactor × Distance × AlignmentType

Where:
  AlignmentInstabilityFactor = Base instability (Fel: 0.03, Mana: 0.01, Arcane: 0.005)
  Distance = Transmission distance (units)
  AlignmentType = Hybrid penalty (opposing alignments increase instability)
  
Examples:
  Pure Fel: 3% loss per unit distance (unstable)
  Pure Mana: 1% loss per unit distance (stable)
  Pure Arcane: 0.5% loss per unit distance (very stable)
  Fel-Arcane Hybrid: 5% loss per unit distance (opposing, high instability)
  Fel-Mana Hybrid: 2% loss per unit distance (stabilized by Mana)
```

**3. Environmental Loss (Environmental Conditions)**
```
EnvironmentalLoss = EnvironmentalHazardFactor × ExposureTime × InfrastructureExposure

Where:
  EnvironmentalHazardFactor = 
    +0.02 (Strong Winds, overhead only)
    +0.01 (Rain/Water, overhead exposed)
    +0.005 (Extreme Temperatures, both)
    +0.01 (Corrosion, coastal/salty environments)
    +0.02 (Aging/Weathering, over time)
  ExposureTime = Time exposed to conditions
  InfrastructureExposure = 1.0 (overhead), 0.1 (underground), 0.5 (protected overhead)
```

**4. Distance Loss (Quadratic Scaling)**
```
DistanceLoss = BaseDistanceLoss × Distance²

Where:
  BaseDistanceLoss = 0.0001 per unit² (1% loss per 10 units, 4% per 20 units, 9% per 30 units)
  Distance = Transmission distance (units)
  
Example:
  10 units: 1% loss
  20 units: 4% loss
  30 units: 9% loss
  50 units: 25% loss (significant!)
```

**5. Quality Loss (Material & Construction Quality)**
```
QualityLoss = MaterialQualityPenalty + ConstructionQualityPenalty + MethodologyPenalty

Where:
  MaterialQualityPenalty = 
    0.00 (Excellent materials)
    +0.02 (Good materials)
    +0.05 (Standard materials)
    +0.10 (Poor materials)
    +0.20 (Substandard materials)
  
  ConstructionQualityPenalty =
    0.00 (Excellent construction)
    +0.02 (Good construction)
    +0.05 (Standard construction)
    +0.10 (Poor construction)
    +0.20 (Substandard construction)
  
  MethodologyPenalty =
    0.00 (Optimal methodology: underground + substations + repeaters)
    +0.02 (Good methodology: overhead + substations)
    +0.05 (Standard methodology: overhead only)
    +0.10 (Poor methodology: minimal infrastructure)
```

---

### Structural Integrity

**Infrastructure structural integrity** depends on material quality, construction quality, and environmental hazards.

**Structural Integrity Calculation:**
```
StructuralIntegrity = BaseIntegrity × MaterialQualityFactor × ConstructionQualityFactor × DegradationFactor

Where:
  BaseIntegrity = Material base strength (varies by material)
  MaterialQualityFactor = 0.7-1.2 (poor to excellent materials)
  ConstructionQualityFactor = 0.7-1.2 (poor to excellent construction)
  DegradationFactor = 1.0 → 0.0 (degrades over time, environmental exposure)
```

**1. Material Strength (Structural Materials)**

**Pylon/Pole Materials:**
```
Steel (High Quality): BaseIntegrity = 1.0, MaterialQualityFactor = 1.2 (excellent)
Steel (Low Quality): BaseIntegrity = 1.0, MaterialQualityFactor = 0.8 (poor)
Reinforced Concrete (High Quality): BaseIntegrity = 0.9, MaterialQualityFactor = 1.1 (good)
Reinforced Concrete (Low Quality): BaseIntegrity = 0.9, MaterialQualityFactor = 0.7 (poor)
Wood (High Quality): BaseIntegrity = 0.6, MaterialQualityFactor = 0.9 (moderate)
Wood (Low Quality): BaseIntegrity = 0.6, MaterialQualityFactor = 0.6 (weak)
Composite Materials (High Quality): BaseIntegrity = 1.1, MaterialQualityFactor = 1.3 (excellent, expensive)
Mana-Infused Materials (High Quality): BaseIntegrity = 1.0, MaterialQualityFactor = 1.2 (magical enhancement)
```

**2. Construction Quality**

**Construction Quality Factors:**
```
Excellent Construction: 
  +20% structural integrity
  +10% resistance to environmental hazards
  Proper foundations, reinforcements, quality control
  
Good Construction:
  +10% structural integrity
  +5% resistance to environmental hazards
  Standard foundations, adequate reinforcements
  
Standard Construction:
  Base structural integrity
  Base resistance to environmental hazards
  Basic foundations, minimal reinforcements
  
Poor Construction:
  -20% structural integrity
  -10% resistance to environmental hazards
  Inadequate foundations, poor reinforcements
  
Substandard Construction:
  -40% structural integrity
  -20% resistance to environmental hazards
  Critical flaws, dangerous infrastructure
```

**3. Environmental Hazards**

**Hazard Resistance:**
```
StructuralDamage = HazardForce × (1 - ResistanceFactor) × StructuralIntegrity

Where:
  HazardForce = Environmental hazard magnitude (strong winds, vehicle impact, etc.)
  ResistanceFactor = Material resistance + Construction resistance
  StructuralIntegrity = Current structural integrity (0.0-1.0)
```

**Hazard Types:**

**Strong Winds:**
```
WindForce = WindSpeed² × ExposureArea × InfrastructureTypeFactor

Where:
  WindSpeed = Wind speed (m/s)
  ExposureArea = Infrastructure exposed area
  InfrastructureTypeFactor = 
    1.0 (Overhead pylons/poles, full exposure)
    0.1 (Underground cables, minimal exposure)
    0.3 (Protected overhead, reduced exposure)

Resistance:
  Steel Pylons (High Quality): High resistance, withstands 50+ m/s winds
  Wood Poles (Low Quality): Low resistance, fails at 20-30 m/s winds
  Reinforced Concrete: Moderate-high resistance, withstands 40+ m/s winds
```

**Vehicle Impacts:**
```
ImpactForce = VehicleMass × VehicleSpeed × ImpactAngle

Where:
  VehicleMass = Mass of impacting vehicle (kg)
  VehicleSpeed = Speed of vehicle (m/s)
  ImpactAngle = Impact angle (0-90 degrees)

Resistance:
  Steel Pylons (High Quality): High resistance, withstands heavy vehicle impacts
  Wood Poles (Low Quality): Low resistance, destroyed by moderate vehicle impact
  Underground Cables: Protected, no impact risk (unless excavation)
  Protected Overhead: Moderate resistance, some protection from impacts
```

**4. Degradation Over Time**

**Aging and Weathering:**
```
DegradationRate = BaseDegradationRate × EnvironmentalExposure × MaterialDurability

Where:
  BaseDegradationRate = 0.001 per year (0.1% per year)
  EnvironmentalExposure = 
    1.0 (Normal conditions)
    1.5 (Harsh conditions: coastal, extreme weather)
    2.0 (Severe conditions: saltwater, extreme temperatures)
  MaterialDurability = 
    0.5 (Poor materials, degrade quickly)
    1.0 (Standard materials)
    1.5 (Excellent materials, degrade slowly)
    2.0 (Superior materials, minimal degradation)

DegradationFactor = 1.0 - (DegradationRate × Age)
```

---

### Distribution Methodology

**Different distribution methods** have different properties and requirements.

**1. Overhead Distribution (Pylons/Poles)**

**Advantages:**
- Lower initial cost
- Easier maintenance access
- High capacity (thick cables)

**Disadvantages:**
- Exposed to environmental hazards (wind, weather, vehicle impacts)
- Visual impact (visible infrastructure)
- Higher environmental losses

**Requirements:**
- Pylons/Poles: Structural support
- Cables/Wires: Overhead conductors
- Insulators: Electrical/magical insulation

**2. Underground Distribution (Cables)**

**Advantages:**
- Protected from environmental hazards (wind, vehicle impacts)
- Low visual impact (hidden infrastructure)
- Lower environmental losses

**Disadvantages:**
- Higher initial cost (excavation, installation)
- More difficult maintenance access
- Lower capacity (cable size limitations)

**Requirements:**
- Underground Cables: Buried conductors
- Conduits: Protective conduits for cables
- Access Points: Maintenance access points

**3. Substations**

**Function:**
- Network routing (connect different network segments)
- Voltage/flow regulation (optimize power flow)
- Isolation (segment networks for safety/maintenance)
- Alignment conversion (optional, convert alignment with efficiency loss)

**Quality Factors:**
```
SubstationEfficiency = BaseEfficiency × EquipmentQuality × ConstructionQuality × MaintenanceLevel

Where:
  BaseEfficiency = 0.90-0.98 (10-2% loss through substation)
  EquipmentQuality = 0.85-1.0 (poor to excellent equipment)
  ConstructionQuality = 0.85-1.0 (poor to excellent construction)
  MaintenanceLevel = 0.8-1.0 (poor to excellent maintenance)
```

**4. Repeaters/Amplifiers**

**Function:**
- Signal/power amplification (boost energy over long distances)
- Loss compensation (compensate for transmission losses)
- Alignment preservation (maintain alignment stability)

**Repeater Effectiveness:**
```
LossReduction = RepeaterQuality × RepeaterDensity × AlignmentCompatibility

Where:
  RepeaterQuality = 0.5-1.0 (poor to excellent repeaters)
  RepeaterDensity = Repeaters per unit distance (0.1-1.0 per unit)
  AlignmentCompatibility = 0.8-1.0 (alignment-specific repeaters more effective)
  
Example:
  Excellent repeaters, 1 per 10 units, compatible alignment:
    LossReduction = 1.0 × 0.1 × 1.0 = 0.1 (10% loss reduction per repeater)
    With 5 repeaters over 50 units: 50% loss reduction
```

---

### Component Structure (Distribution Infrastructure)

```csharp
// Distribution infrastructure component
public struct DistributionInfrastructure : IComponentData
{
    public InfrastructureType Type;           // Pylon, Pole, Underground Cable, Substation, Repeater
    public InfrastructureMethodology Methodology; // Overhead, Underground, Hybrid
    
    // Material properties
    public FixedString64Bytes WireMaterialId; // Wire/conductor material (copper, aluminum, etc.)
    public float WireMaterialQuality;        // 0.0-1.0 (material quality)
    public float WireProductionQuality;      // 0.0-1.0 (production quality)
    public FixedString64Bytes StructuralMaterialId; // Structural material (steel, concrete, etc.)
    public float StructuralMaterialQuality;  // 0.0-1.0 (structural material quality)
    
    // Construction properties
    public float ConstructionQuality;        // 0.0-1.0 (construction quality)
    public float Age;                        // Age in years
    public float DegradationLevel;           // 0.0-1.0 (degradation, increases over time)
    
    // Performance properties
    public float BaseCapacity;               // Maximum flow capacity (MP/sec or MW)
    public float CurrentCapacity;            // Current capacity (reduced by degradation)
    public float ConductionEfficiency;       // 0.0-1.0 (wire conduction efficiency)
    public float StructuralIntegrity;        // 0.0-1.0 (structural integrity)
    
    // Environmental exposure
    public EnvironmentalExposure Exposure;   // Exposure to environmental hazards
    public float EnvironmentalLossRate;      // Loss rate from environmental factors
}

// Distribution segment (connects infrastructure pieces)
public struct DistributionSegment : IComponentData
{
    public Entity StartInfrastructure;       // Start infrastructure entity
    public Entity EndInfrastructure;         // End infrastructure entity
    public float Distance;                   // Distance between infrastructure
    public float TotalLoss;                  // Total loss over segment (0.0-1.0)
    public EnergyAlignmentComposition Alignment; // Alignment flowing through segment
}

// Substation component
public struct SubstationComponent : IComponentData
{
    public float EquipmentQuality;           // 0.0-1.0 (substation equipment quality)
    public float ConstructionQuality;        // 0.0-1.0 (construction quality)
    public float MaintenanceLevel;           // 0.0-1.0 (maintenance level)
    public float Efficiency;                 // 0.0-1.0 (substation efficiency, 0.90-0.98)
    public bool CanConvertAlignment;        // True if can convert alignment
    public float ConversionEfficiency;      // 0.0-1.0 (if conversion enabled)
}

// Repeater/Amplifier component
public struct RepeaterComponent : IComponentData
{
    public float RepeaterQuality;            // 0.0-1.0 (repeater quality)
    public float AmplificationFactor;        // 1.0-2.0 (amplification multiplier)
    public float LossReduction;              // 0.0-1.0 (loss reduction factor)
    public EnergyAlignmentComposition OptimalAlignment; // Optimal alignment for repeater
    public float AlignmentCompatibility;     // 0.0-1.0 (alignment compatibility factor)
}
```

---

---

## Mana-Powered Buildings

### Building Mana Requirements

**Buildings can require mana** to operate (similar to power requirements).

**Building Types:**

**1. Mana-Powered Workshops**
- **Mana Requirement:** Continuous mana consumption (MP/sec)
- **Function:** Crafting, production, magical processes
- **Alignment:** Can use any alignment (Fel, Mana, Arcane)
- **Example:** Enchantment workshop, magical forge, alchemy lab

**2. Mana-Powered Defenses**
- **Mana Requirement:** Continuous mana consumption (MP/sec)
- **Function:** Defensive systems, wards, barriers
- **Alignment:** Often requires specific alignment (Fel for corrupt defenses, Arcane for pure defenses)
- **Example:** Mana shield, defensive ward, barrier generator

**3. Mana-Powered Utilities**
- **Mana Requirement:** Continuous mana consumption (MP/sec)
- **Function:** Utilities, infrastructure, services
- **Alignment:** Can use any alignment (Mana neutral, Fel corrupting, Arcane purifying)
- **Example:** Mana lighting, mana heating, mana-powered water systems
- **Flexibility:** Players choose alignment based on desired effects (Fel for corrupt utilities, Arcane for pure utilities, Mana for neutral)

**4. Mana Generators**
- **Function:** Generate mana from various sources
- **Alignment:** Can generate any alignment (Fel generator, Arcane generator, neutral Mana generator)
- **Output:** Mana generation rate (MP/sec)
- **Example:** Ley line generator, prayer generator, mana reactor, fel generator, arcane generator
- **Flexibility:** Players choose generator alignment based on world design

---

### Building Mana States

**Buildings have mana states** (similar to power states).

**1. Powered (100% Mana)**
- **State:** Building receives full mana supply
- **Functionality:** 100% effectiveness
- **Consumption:** Full mana consumption

**2. Underpowered (50-99% Mana)**
- **State:** Building receives reduced mana supply
- **Functionality:** Reduced effectiveness (proportional to mana)
- **Consumption:** Reduced mana consumption

**3. Powered Off (0% Mana)**
- **State:** Building receives no mana
- **Functionality:** No functionality (building inactive)
- **Consumption:** No mana consumption

---

### Alignment Effects on Buildings

**Buildings can use any alignment** - alignment determines effects, efficiency, and stability rather than hard requirements.

**1. Fel-Powered Buildings**
- **Can Use:** Any alignment (Fel optimal, Mana acceptable, Arcane inefficient/unstable)
- **Fel Effects:** Corruption spread, instability, dark magic enhancement
- **Mana Effects:** Reduced corruption, stable operation, neutralized alignment
- **Arcane Effects:** Conflicting effects (corruption vs purity), reduced efficiency, instability
- **Risks:** Entities may be corrupted (if Fel), buildings may become unstable (if opposing alignment)
- **Example:** Dark forge (Fel-optimal), corrupt altar (Fel-optimal), fel-powered defenses (Fel-optimal)

**2. Arcane-Powered Buildings**
- **Can Use:** Any alignment (Arcane optimal, Mana acceptable, Fel inefficient/unstable)
- **Arcane Effects:** Purity enhancement, stability, light magic enhancement
- **Mana Effects:** Reduced purity, stable operation, neutralized alignment
- **Fel Effects:** Conflicting effects (purity vs corruption), reduced efficiency, instability
- **Risks:** Low (if Arcane/Mana), instability (if Fel)
- **Example:** Pure sanctum (Arcane-optimal), arcane library (Arcane-optimal), arcane-powered defenses (Arcane-optimal)

**3. Neutral Mana Buildings**
- **Can Use:** Any alignment (Mana optimal, Fel/Arcane acceptable)
- **Mana Effects:** No alignment effects (neutral), stable operation
- **Fel Effects:** Corruption spread, instability
- **Arcane Effects:** Purity enhancement, stability
- **Risks:** None (if Mana), alignment effects (if Fel/Arcane)
- **Example:** Standard workshop (Mana-optimal, but can use any), neutral generator (Mana-optimal), mana-powered utilities (Mana-optimal)

**Player Flexibility:**
- **No Hard Requirements:** Buildings can use any alignment
- **Optimal vs Acceptable:** Players choose efficiency/stability vs alignment effects
- **World Crafting:** Players design their own energy systems (pure Fel worlds, mixed alignment worlds, etc.)

---

## Mana-Powered Tools and Equipment

### Tool Mana Requirements

**Tools and equipment can require mana** to operate.

**Tool Types:**

**1. Mana-Powered Tools**
- **Mana Requirement:** Mana consumption per use (MP/use) or continuous (MP/sec)
- **Function:** Crafting, construction, magical processes
- **Alignment:** Can use any alignment (with alignment-specific effects)
- **Fel Effects:** Corrupt crafting, unstable results, enhanced destructive power
- **Mana Effects:** Neutral crafting, stable results, standard power
- **Arcane Effects:** Pure crafting, stable results, enhanced constructive power
- **Example:** Mana hammer (any alignment), enchantment tool (any alignment), magical saw (any alignment)

**2. Mana-Powered Weapons**
- **Mana Requirement:** Mana consumption per attack (MP/attack)
- **Function:** Combat, magical attacks
- **Alignment:** Can use any alignment (optimal alignment enhances weapon type)
- **Fel Effects:** Corrupt damage, instability, enhanced destructive attacks
- **Mana Effects:** Neutral damage, stable operation, standard attacks
- **Arcane Effects:** Pure damage, stability, enhanced defensive attacks
- **Example:** Mana sword (any alignment), fel-powered weapon (Fel-optimal), arcane staff (Arcane-optimal)

**3. Mana-Powered Armor**
- **Mana Requirement:** Continuous mana consumption (MP/sec) for active effects
- **Function:** Defense, magical protection
- **Alignment:** Can use any alignment (optimal alignment enhances protection type)
- **Fel Effects:** Corrupt protection, unstable shield, enhanced offensive protection
- **Mana Effects:** Neutral protection, stable shield, standard defense
- **Arcane Effects:** Pure protection, stable shield, enhanced defensive protection
- **Example:** Mana shield (any alignment), fel armor (Fel-optimal), arcane protection (Arcane-optimal)

---

## Mana-Powered Entities

### Entity Mana Requirements

**Entities can require mana** to function (similar to power requirements).

**Entity Types:**

**1. Mana-Powered Constructs**
- **Mana Requirement:** Continuous mana consumption (MP/sec)
- **Function:** Golems, constructs, magical entities
- **Alignment:** Can use any alignment (optimal alignment enhances construct type)
- **Fel Effects:** Corrupt construct, instability, enhanced destructive capabilities
- **Mana Effects:** Neutral construct, stable operation, standard capabilities
- **Arcane Effects:** Pure construct, stability, enhanced constructive capabilities
- **Example:** Mana golem (any alignment), fel construct (Fel-optimal), arcane guardian (Arcane-optimal)

**2. Mana-Enhanced Entities**
- **Mana Requirement:** Mana consumption for enhanced abilities (MP/ability)
- **Function:** Entities with mana-enhanced capabilities
- **Alignment:** Can use any alignment (alignment affects enhancement type)
- **Fel Effects:** Corrupt enhancements, instability, enhanced destructive abilities
- **Mana Effects:** Neutral enhancements, stable operation, standard abilities
- **Arcane Effects:** Pure enhancements, stability, enhanced constructive abilities
- **Example:** Mage with mana-enhanced spells (any alignment), warrior with mana-enhanced weapons (any alignment)

**3. Mana-Dependent Entities**
- **Mana Requirement:** Mana required for survival (MP/sec)
- **Function:** Entities that depend on mana to exist
- **Alignment:** Can use any alignment (optimal alignment provides best efficiency/stability)
- **Fel Effects:** Corrupt entity, instability, enhanced destructive nature
- **Mana Effects:** Neutral entity, stable existence, standard nature
- **Arcane Effects:** Pure entity, stable existence, enhanced constructive nature
- **Example:** Fel entity (Fel-optimal, but can use any), arcane spirit (Arcane-optimal, but can use any), mana-dependent creature (any alignment)

---

## Component Structure

### Mana Energy Components

```csharp
// Mana generator (produces mana)
public struct ManaGenerator : IComponentData
{
    public float GenerationRate;        // MP/sec or MW
    public EnergyAlignmentComposition Alignment; // Pure or hybrid alignment
    public float Efficiency;            // 0.0-1.0 (generation efficiency)
    public bool IsActive;               // True if generator is active
}

// Mana battery (stores mana)
public struct ManaBattery : IComponentData
{
    public float Capacity;              // Maximum storage (MP or MW-hours)
    public float CurrentStorage;        // Current storage (0 to capacity)
    public EnergyAlignmentComposition Alignment; // Pure or hybrid alignment (preserved)
    public float ChargeRate;            // MP/sec charge rate
    public float DischargeRate;         // MP/sec discharge rate
    public float ChargeEfficiency;      // 0.85-0.95 (charge efficiency)
    public float DischargeEfficiency;   // 0.85-0.95 (discharge efficiency)
    public float SelfDischargeRate;     // MP/sec self-discharge
    // Note: Hybrid alignments may have blended self-discharge rates
}

// Mana consumer (consumes mana)
public struct ManaConsumer : IComponentData
{
    public float ConsumptionRate;       // MP/sec continuous consumption
    public float OneTimeCost;           // MP one-time cost (for instant effects)
    public EnergyAlignmentComposition OptimalAlignment; // Optimal alignment (pure or hybrid, best efficiency/stability)
    public float AlignmentEfficiencyFactor; // 0.6-1.0 (efficiency based on alignment match)
    public float AlignmentStabilityFactor;  // 0.8-1.0 (stability based on alignment match)
    public bool RequiresMana;           // True if requires mana to function
    // Note: All consumers can use any alignment (pure or hybrid, flexibility), optimal alignment just provides best performance
}

// Mana conduit (distributes mana)
public struct ManaConduit : IComponentData
{
    public float Capacity;              // Maximum flow rate (MP/sec or MW)
    public float Efficiency;            // 0.85-0.95 (conduit efficiency)
    public EnergyAlignmentComposition Alignment; // Alignment of mana flowing (pure or hybrid, preserved or converted)
    public bool CanConvertAlignment;    // True if can convert alignment (with efficiency loss)
    // Note: Hybrid alignments flow through conduits, components can blend during conversion
}
```

---

### Alignment Components

```csharp
// Energy alignment enum (pure alignments)
public enum EnergyAlignment : byte
{
    Neutral = 0,    // Neutral Mana (no alignment effects)
    Fel = 1,        // Corrupt (destructive, corrupting)
    Arcane = 2,     // Pure (orderly, enhancing)
    Electricity = 3,// Neutral Power (if power alignment implemented)
    // Note: Hybrid alignments use EnergyAlignmentComposition struct
}

// Energy alignment composition (supports pure and hybrid alignments)
public struct EnergyAlignmentComposition : IComponentData
{
    // Pure alignment percentages (must sum to 1.0)
    public float FelPercentage;         // 0.0-1.0 (percentage of Fel)
    public float ManaPercentage;        // 0.0-1.0 (percentage of Mana)
    public float ArcanePercentage;      // 0.0-1.0 (percentage of Arcane)
    public float ElectricityPercentage; // 0.0-1.0 (percentage of Electricity/Power, if implemented)
    
    // Helpers
    public bool IsPure() // True if single alignment at 100%
    {
        return (FelPercentage == 1.0f) || (ManaPercentage == 1.0f) || 
               (ArcanePercentage == 1.0f) || (ElectricityPercentage == 1.0f);
    }
    
    public bool IsHybrid() // True if multiple alignments mixed
    {
        int activeComponents = 0;
        if (FelPercentage > 0f) activeComponents++;
        if (ManaPercentage > 0f) activeComponents++;
        if (ArcanePercentage > 0f) activeComponents++;
        if (ElectricityPercentage > 0f) activeComponents++;
        return activeComponents > 1;
    }
    
    public EnergyAlignment GetPrimaryAlignment() // Returns dominant alignment
    {
        if (FelPercentage >= ManaPercentage && FelPercentage >= ArcanePercentage && FelPercentage >= ElectricityPercentage)
            return EnergyAlignment.Fel;
        if (ArcanePercentage >= ManaPercentage && ArcanePercentage >= ElectricityPercentage)
            return EnergyAlignment.Arcane;
        if (ElectricityPercentage >= ManaPercentage)
            return EnergyAlignment.Electricity;
        return EnergyAlignment.Neutral;
    }
}

// Alignment compatibility calculator (flexible system with hybrid support)
public struct AlignmentCompatibility : IComponentData
{
    public EnergyAlignmentComposition SourceAlignment; // Source alignment (pure or hybrid)
    public EnergyAlignmentComposition TargetAlignment; // Target alignment (pure or hybrid)
    public float EfficiencyFactor;      // 0.6-1.0 (efficiency based on alignment match, always works)
    public float StabilityFactor;       // 0.8-1.0 (stability based on alignment match)
    public float AlignmentEffectStrength; // 0.0-1.0 (strength of alignment effects, blended for hybrids)
    // Note: All alignments (pure and hybrid) are compatible (no hard blocks), factors determine performance
    // Hybrid alignments calculate compatibility per component, then blend results
}

// Alignment effects (on entities/buildings, supports hybrid alignments)
public struct AlignmentEffects : IComponentData
{
    public EnergyAlignmentComposition AppliedAlignment; // Applied alignment (pure or hybrid)
    public float CorruptionLevel;       // 0.0-1.0 (corruption from Fel, scaled by Fel percentage)
    public float PurityLevel;           // 0.0-1.0 (purity from Arcane, scaled by Arcane percentage)
    public float StabilityLevel;        // 0.0-1.0 (stability, blended based on components)
    // Note: Hybrid alignments blend effects proportionally (e.g., Fel-Mana = reduced corruption, increased stability)
}
```

---

### Building Mana Components

```csharp
// Building mana state
public struct BuildingManaState : IComponentData
{
    public float CurrentManaSupply;     // 0.0-1.0 (percentage of required mana)
    public float RequiredManaRate;      // MP/sec required for 100% functionality
    public float CurrentEffectiveness;  // 0.0-1.0 (effectiveness based on mana supply and alignment)
    public EnergyAlignmentComposition OptimalAlignment; // Optimal alignment (pure or hybrid, best efficiency/stability)
    public EnergyAlignmentComposition CurrentAlignment; // Currently supplied alignment (pure or hybrid)
    public float AlignmentEfficiencyFactor; // 0.6-1.0 (efficiency based on alignment match)
    public float AlignmentStabilityFactor;  // 0.8-1.0 (stability based on alignment match)
    public bool IsPowered;              // True if receiving mana supply
    // Note: Buildings can use any alignment (pure or hybrid, flexibility), optimal alignment just provides best performance
}

// Building mana connection
public struct BuildingManaConnection : IComponentData
{
    public Entity ManaSource;           // Generator, battery, or network
    public float SupplyRate;            // MP/sec supplied
    public EnergyAlignment SupplyAlignment; // Alignment of supplied mana
    public float ConnectionEfficiency;  // 0.85-0.95 (connection efficiency)
}
```

---

## System Dynamics

### Inputs
- Mana generation (prayers, ley lines, generators)
- Mana storage (battery charging/discharging)
- Mana consumption (buildings, tools, entities)
- Alignment conversion (energy alignment changes)

### Internal Processes
1. **Mana Generation:** Sources generate mana (with alignment)
2. **Mana Storage:** Batteries store mana (preserving alignment)
3. **Mana Distribution:** Conduits distribute mana (with losses, preserving/converting alignment)
4. **Mana Consumption:** Buildings/tools/entities consume mana (with alignment requirements)
5. **Alignment Effects:** Alignment affects entities/buildings (corruption, purity, stability)

### Outputs
- Mana-powered buildings (functionality based on mana supply)
- Mana-powered tools (operational based on mana)
- Mana-powered entities (functional based on mana)
- Alignment effects (corruption, purity, stability changes)

---

## Balancing Considerations

### Alignment Characteristics (Not Restrictions)

**Fel (Corrupt):**
- **Advantages:** High power density, powerful corrupt effects, cheap generation
- **Trade-offs:** Corruption spread, instability (when mismatched), entity corruption, high self-discharge
- **On Fel Systems:** Optimal efficiency, stable, corruption amplified
- **On Arcane Systems:** Reduced efficiency (~70%), unstable operation, conflicting effects
- **On Mana Systems:** Good efficiency (~95%), stable, corruption neutralized somewhat
- **Balance:** Powerful corrupt effects, but instability when mismatched

**Mana (Neutral):**
- **Advantages:** Stable, versatile, no strong alignment effects, standard efficiency
- **Trade-offs:** No special alignment benefits, standard power density
- **On All Systems:** Good efficiency (90-100%), stable operation, neutralizes alignment effects
- **Balance:** Reliable, versatile, works well everywhere

**Arcane (Pure):**
- **Advantages:** High efficiency (when matched), purity effects, stability, low self-discharge
- **Trade-offs:** More expensive generation, reduced efficiency when mismatched (e.g., on Fel systems)
- **On Arcane Systems:** Optimal efficiency, stable, purity amplified
- **On Fel Systems:** Reduced efficiency (~70%), unstable operation, conflicting effects
- **On Mana Systems:** Good efficiency (~95%), stable, purity neutralized somewhat
- **Balance:** Efficient and stable (when matched), requires investment

**Player Flexibility:**
- **No Hard Restrictions:** All alignments work on all systems
- **Performance Varies:** Efficiency/stability/effects vary based on alignment match
- **Player Choice:** Players choose based on desired effects, efficiency, and stability trade-offs
- **World Crafting:** Players craft their own energy systems with desired balance

---

### Energy Equivalence

**Mana = Power (energy calculations):**
- **1 MP = 1 Power Unit** (for energy calculations)
- Buildings/tools/entities can use either
- Conversion possible (with efficiency losses)
- Balance: Both energy types should be viable

---

## Integration Notes

### Optional Implementation

**Power Alignment (May Be Skipped):**
- User may choose to leave power neutral (no alignment variants)
- Only mana has alignment (Fel, Mana, Arcane)
- Power remains standard energy resource (no alignment effects)

**Recommended Approach:**
- Implement mana alignment (Fel, Mana, Arcane)
- Leave power neutral (standard energy resource)
- Focus on mana alignment system (simpler, cleaner)

---

## Design Philosophy: Maximum Flexibility

**Core Principle:** All alignments can power all systems - players craft their own worlds.

**Flexibility Features:**
- **No Hard Blocks:** Fel can power Arcane tools (with efficiency/stability penalties)
- **Performance Scaling:** Efficiency, stability, and effects scale based on alignment match
- **Player Choice:** Players choose trade-offs (efficiency vs. effects vs. stability)
- **World Crafting:** Players design their own energy systems (pure Fel worlds, mixed alignment worlds, etc.)

**Example Flexibility:**
- Fel-powered Arcane building: 70% efficiency, unstable, conflicting effects (corruption vs purity)
- Arcane-powered Fel tool: 70% efficiency, unstable, conflicting effects (purity vs corruption)
- Mana-powered anything: 90-100% efficiency, stable, neutralized alignment effects
- Matching alignments: 100% efficiency, stable, alignment effects amplified

---

## Energy Technology Research and Invention

### Procedural Technology System

**Entities need to invent proper ways to utilize and store energy** - technology research is semi-procedural, with templates that can be optimized through research.

**Core Concept:**
- **Technology Templates:** Base templates exist (generators, batteries, capacitors) with parameterized properties
- **Research Optimization:** Entities research to optimize templates (improve size/mass/power ratios)
- **Procedural Variations:** Technologies have infinite possible variations within template constraints
- **Researcher-Dependent:** Research outcomes depend on researcher skills, stats, behavior, and outlook profiles

---

### Technology Templates

**Base technology templates** define the fundamental structure and parameters of energy systems.

**Template Types:**

**1. Generator Templates**
- **Parameters:** Power generation rate (MP/sec or MW), size, mass, efficiency, alignment support
- **Examples:** Mana generator, Fel generator, Arcane generator, Hybrid generator, Power generator
- **Optimization Targets:** Size/mass ratio, efficiency, alignment compatibility, generation rate

**2. Battery Templates**
- **Parameters:** Storage capacity (MP or MW-hours), size, mass, charge/discharge rate, alignment support
- **Examples:** Li-ion battery, Mana battery, Fel battery, Hybrid battery, Capacitor
- **Optimization Targets:** Energy density (capacity/mass), size/mass ratio, charge/discharge speed, alignment preservation

**3. Capacitor Templates**
- **Parameters:** Storage capacity (MP or MW), size, mass, charge/discharge rate, burst capacity
- **Examples:** Standard capacitor, Mana capacitor, Hybrid capacitor, Supercapacitor
- **Optimization Targets:** Burst capacity, charge/discharge speed, size/mass ratio, efficiency

**4. Conduit Templates**
- **Parameters:** Flow capacity (MP/sec or MW), size, mass, efficiency, alignment support
- **Examples:** Power conduit, Mana conduit, Hybrid conduit, Superconductor
- **Optimization Targets:** Flow capacity/mass, efficiency, alignment preservation, distance losses

---

### Template Parameterization

**Templates are parameterized** - infinite variations exist within template constraints.

**Parameter Ranges:**

**Generator Template Example:**
```
Template: Mana Generator
  Base Parameters:
    Generation Rate: 10-1000 MP/sec (variable)
    Size: 1-100 cubic meters (variable)
    Mass: 10-1000 kg (variable)
    Efficiency: 0.7-0.99 (variable, research improves)
    Alignment Support: Fel/Mana/Arcane/Electricity (selectable)
    Power Density: Generation Rate / Mass (target: maximize)
    Size Efficiency: Generation Rate / Size (target: maximize)
```

**Battery Template Example:**
```
Template: Energy Battery
  Base Parameters:
    Capacity: 100-100000 MP or MW-hours (variable)
    Size: 0.1-100 cubic meters (variable)
    Mass: 1-10000 kg (variable)
    Charge Rate: 10-1000 MP/sec (variable)
    Discharge Rate: 10-1000 MP/sec (variable)
    Alignment Support: Fel/Mana/Arcane/Electricity/Hybrid (selectable)
    Energy Density: Capacity / Mass (target: maximize, units: MP/kg or MW-h/kg)
    Size Efficiency: Capacity / Size (target: maximize)
```

**Hybrid Template Example:**
```
Template: Hybrid Battery (e.g., Mana-Ion Hybrid)
  Base Parameters:
    Capacity: Blended (Mana component + Ion component)
    Size: Blended size requirements
    Mass: Blended mass requirements
    Charge/Discharge Rate: Blended rates
    Alignment Support: Hybrid (Mana + Electricity)
    Energy Density: Optimized blend (may be better than pure components)
    Example: Lightweight mana-ion hybrid (better energy density than pure li-ion)
```

---

### Research and Optimization

**Entities research to optimize templates** - research leads to improved versions.

**Research Process:**

**1. Research Initiation**
- **Triggered By:** Entities with research skills, research facilities, research goals
- **Requirements:** Researchers (skills, stats), research facilities, resources, time
- **Goal:** Optimize template parameters (improve size/mass/power ratios)

**2. Research Calculation**

**Research Success Factors:**
```
ResearchQuality = 
    ResearcherSkill × 0.4 +
    ResearcherStats × 0.3 +
    FacilityQuality × 0.2 +
    ResourceAvailability × 0.1 +
    BehaviorModifiers × 0.1 +
    OutlookModifiers × 0.1

Where:
  ResearcherSkill = Relevant research skill (0-100)
  ResearcherStats = Intelligence, Wisdom, Creativity stats
  FacilityQuality = Research facility quality (0-100)
  ResourceAvailability = Available research resources (0-100)
  BehaviorModifiers = Behavior profile modifiers (e.g., methodical +10%, chaotic -5%)
  OutlookModifiers = Outlook profile modifiers (e.g., innovation-focused +15%, conservative -10%)
```

**3. Research Outcomes**

**Parameter Improvements:**
```
ParameterImprovement = BaseImprovement × ResearchQuality × ResearchTime

Where:
  BaseImprovement = Template-specific improvement potential
  ResearchQuality = 0.5-2.0 (researcher and facility quality)
  ResearchTime = Time spent on research (days, weeks, months)

Examples:
  Energy Density Improvement: +5-20% per research cycle
  Size Efficiency Improvement: +3-15% per research cycle
  Efficiency Improvement: +1-5% per research cycle
```

**4. Technology Variations**

**Research Creates Variations:**
- **Optimized Versions:** Better size/mass/power ratios (lightweight, high-capacity, efficient)
- **Hybrid Variations:** Combinations of different templates (mana-ion hybrid, fel-arcane generator)
- **Specialized Versions:** Optimized for specific use cases (military batteries, civilian generators)
- **Experimental Versions:** High-risk, high-reward variations (may have drawbacks)

---

### Researcher Influence

**Research outcomes depend heavily on researchers** - their skills, stats, behavior, and outlook profiles.

**Researcher Factors:**

**1. Skills**
- **Research Skill:** Primary skill affecting research quality (0-100)
- **Specialization:** Specific technology expertise (batteries, generators, conduits, etc.)
- **Experience:** Previous research experience (accumulated expertise)
- **Education:** Formal education, training, knowledge base

**2. Stats**
- **Intelligence:** Affects research quality, innovation, problem-solving
- **Wisdom:** Affects research efficiency, optimization, practical application
- **Creativity:** Affects innovation, hybrid combinations, experimental approaches
- **Diligence:** Affects research consistency, thoroughness, quality control

**3. Behavior Profile**
- **Methodical:** +10% research quality, slower research speed
- **Chaotic:** -5% research quality, faster research speed, more experimental
- **Innovative:** +15% hybrid/experimental research, higher risk/reward
- **Conservative:** -10% innovation, +10% reliability, safer research
- **Perfectionist:** +20% quality, -30% research speed

**4. Outlook Profile**
- **Innovation-Focused:** +15% experimental research, better hybrid combinations
- **Efficiency-Focused:** +20% optimization research, better size/mass/power ratios
- **Practical-Focused:** +15% real-world application, better reliability
- **Theoretical-Focused:** +15% fundamental research, better efficiency improvements
- **Military-Focused:** +20% combat-optimized research (lightweight, high-capacity batteries)
- **Civilian-Focused:** +20% cost-effective research (cheap, reliable generators)

---

### Technology Evolution Examples

**Example 1: Battery Evolution (Military Application)**

**Generation 1: Li-Ion Battery**
```
Template: Standard Battery
  Capacity: 10,000 MP-hours
  Mass: 100 kg
  Size: 0.5 cubic meters
  Energy Density: 100 MP-hours/kg
  Research: Basic technology, no optimization
```

**Generation 2: Optimized Li-Ion Battery**
```
Template: Standard Battery (Optimized)
  Capacity: 12,000 MP-hours
  Mass: 90 kg (10% reduction)
  Size: 0.45 cubic meters (10% reduction)
  Energy Density: 133 MP-hours/kg (33% improvement)
  Research: Methodical researcher, efficiency-focused outlook
```

**Generation 3: Mana-Ion Hybrid Battery**
```
Template: Hybrid Battery (Mana + Ion)
  Capacity: 15,000 MP-hours (Mana component + Ion component)
  Mass: 80 kg (20% reduction from original)
  Size: 0.4 cubic meters (20% reduction)
  Energy Density: 187.5 MP-hours/kg (87.5% improvement)
  Research: Innovative researcher, hybrid technology expertise, military-focused outlook
```

**Result:** Army with lightweight mana-ion hybrid batteries defeats army with heavy li-ion batteries (better mobility, same capacity).

---

**Example 2: Generator Evolution (Research-Driven)**

**Generation 1: Basic Fel Generator**
```
Template: Generator
  Generation Rate: 100 MP/sec
  Mass: 200 kg
  Size: 1 cubic meter
  Efficiency: 0.75
  Power Density: 0.5 MP/sec/kg
  Research: Basic technology
```

**Generation 2: Optimized Fel Generator**
```
Template: Generator (Optimized)
  Generation Rate: 120 MP/sec
  Mass: 180 kg (10% reduction)
  Size: 0.9 cubic meters (10% reduction)
  Efficiency: 0.80 (5% improvement)
  Power Density: 0.67 MP/sec/kg (34% improvement)
  Research: Intelligent researcher, efficiency-focused outlook, theoretical focus
```

**Generation 3: Hybrid Fel-Arcane Generator**
```
Template: Hybrid Generator (Fel + Arcane)
  Generation Rate: 150 MP/sec (blended components)
  Mass: 160 kg (20% reduction)
  Size: 0.8 cubic meters (20% reduction)
  Efficiency: 0.85 (13% improvement, hybrid synergy)
  Power Density: 0.94 MP/sec/kg (88% improvement)
  Research: Creative researcher, innovation-focused outlook, experimental approach
```

---

### Technology Application Scenarios

**1. Military Applications**

**Army Logistics:**
- **Heavy Li-Ion Batteries:** Low-tech army uses heavy batteries (100 kg, 10,000 MP-hours)
- **Lightweight Mana-Ion Hybrid:** Advanced army uses lightweight hybrid batteries (80 kg, 15,000 MP-hours)
- **Combat Advantage:** Advanced army has better mobility, same energy capacity
- **Research Dependency:** Requires innovative researchers with military-focused outlook

**2. Civilian Applications**

**Infrastructure:**
- **Standard Generators:** Basic infrastructure uses standard generators
- **Optimized Generators:** Advanced infrastructure uses optimized generators (better efficiency, lower cost)
- **Hybrid Systems:** Cutting-edge infrastructure uses hybrid systems (mana-electricity blend)
- **Research Dependency:** Requires practical researchers with civilian-focused outlook

**3. Experimental Applications**

**Research Facilities:**
- **Experimental Technologies:** High-risk, high-reward technologies (may have drawbacks)
- **Hybrid Combinations:** Unique combinations (fel-arcane generators, mana-ion-arcane batteries)
- **Breakthrough Technologies:** Revolutionary improvements (10x energy density, near-perfect efficiency)
- **Research Dependency:** Requires creative, innovative researchers with theoretical focus

---

## Component Structure (Research System)

```csharp
// Technology template definition
public struct TechnologyTemplate : IComponentData
{
    public FixedString64Bytes TemplateId;      // "Generator", "Battery", "Capacitor", etc.
    public TechnologyType Type;                // Generator, Battery, Capacitor, Conduit
    public EnergyAlignmentComposition AlignmentSupport; // Supported alignments
    
    // Parameter ranges (for procedural generation)
    public float MinGenerationRate;            // For generators
    public float MaxGenerationRate;
    public float MinCapacity;                  // For batteries/capacitors
    public float MaxCapacity;
    public float MinSize;
    public float MaxSize;
    public float MinMass;
    public float MaxMass;
    public float MinEfficiency;
    public float MaxEfficiency;
}

// Technology variant (optimized version)
public struct TechnologyVariant : IComponentData
{
    public Entity TemplateEntity;              // Reference to template
    public FixedString64Bytes VariantId;      // Unique variant identifier
    public TechnologyType Type;
    
    // Optimized parameters
    public float GenerationRate;               // For generators (MP/sec)
    public float Capacity;                     // For batteries/capacitors (MP or MW-hours)
    public float Size;                         // Cubic meters
    public float Mass;                         // Kilograms
    public float Efficiency;                   // 0.0-1.0
    
    // Derived metrics
    public float EnergyDensity;                // Capacity/Mass (MP/kg or MW-h/kg)
    public float PowerDensity;                 // Generation Rate/Mass (MP/sec/kg)
    public float SizeEfficiency;               // Capacity/Size or Generation Rate/Size
    
    // Research metadata
    public Entity ResearchEntity;              // Entity that researched this variant
    public uint ResearchCompletionTick;        // When research completed
    public float ResearchQuality;              // 0.0-2.0 (research quality score)
}

// Research project (ongoing research)
public struct ResearchProject : IComponentData
{
    public Entity ResearcherEntity;            // Entity conducting research
    public Entity TemplateEntity;              // Template being optimized
    public TechnologyType TargetType;          // Generator, Battery, etc.
    
    // Research progress
    public float ResearchProgress;             // 0.0-1.0 (progress toward completion)
    public float ResearchQuality;              // 0.0-2.0 (current research quality)
    public float ResearchTime;                 // Time spent on research (days)
    
    // Researcher factors
    public float ResearcherSkill;              // Research skill (0-100)
    public float ResearcherIntelligence;       // Intelligence stat
    public float ResearcherCreativity;         // Creativity stat
    public float BehaviorModifier;             // Behavior profile modifier
    public float OutlookModifier;              // Outlook profile modifier
    
    // Target optimization
    public OptimizationTarget Target;          // Energy density, size efficiency, etc.
}

// Optimization target
public enum OptimizationTarget : byte
{
    EnergyDensity,      // Maximize capacity/mass
    PowerDensity,       // Maximize generation rate/mass
    SizeEfficiency,     // Minimize size for capacity/rate
    Efficiency,         // Maximize efficiency
    Cost,               // Minimize resource cost
    Hybrid,             // Create hybrid variation
    Experimental        // Experimental optimization
}
```

---

## Communications and Sensor Networks

### Network Quality System

**Communications and sensor networks have quality** based on material quality, construction quality (from refiners and craftsmen), and research quality (from researchers who unlocked the tech).

**Core Concept:**
- **Component Quality:** Material quality and build quality determine component performance
- **Craftsman Skill:** Refiners and craftsmen skills affect material and construction quality
- **Research Quality:** Researchers who unlock tech determine base implementation quality
- **Tech Optimization:** Researchers can "reroll" tech to optimize parameters further

---

### Quality Formula

**Overall Network Quality:**
```
NetworkQuality = 
    ComponentMaterialQuality × 0.4 +
    ComponentBuildQuality × 0.4 +
    TechImplementationQuality × 0.2 +
    OptimizationBonus

Where:
  ComponentMaterialQuality = 0.0-1.0 (material quality from refiners)
  ComponentBuildQuality = 0.0-1.0 (construction quality from craftsmen)
  TechImplementationQuality = 0.0-1.0 (research quality from tech unlock)
  OptimizationBonus = 0.0-0.2 (additional optimization from tech rerolls)
```

---

### Component Material Quality (Refiner Skills)

**Material quality depends on refiners** who process raw materials into refined components.

**Material Processing:**
```
MaterialQuality = BaseMaterialQuality × RefinerSkillFactor × RefinerStatsFactor × ProcessingQuality

Where:
  BaseMaterialQuality = 0.5-1.0 (base quality of raw materials)
  RefinerSkillFactor = RefinerSkill / 100 (0.0-1.0, refiner's material processing skill)
  RefinerStatsFactor = (Intelligence + Wisdom + Diligence) / 300 (stat contribution)
  ProcessingQuality = 0.8-1.2 (processing facility quality, tools, conditions)
```

**Refiner Influence:**
- **Refiner Skill:** Primary skill affecting material quality (0-100)
- **Stats:** Intelligence (precision), Wisdom (quality judgment), Diligence (consistency)
- **Behavior Profile:** Methodical (+10% quality), Perfectionist (+20% quality, -30% speed)
- **Outlook Profile:** Quality-focused (+15% quality), Efficiency-focused (-5% quality, +15% speed)

**Material Quality Examples:**
```
Excellent Refiner (Skill 95, Stats 90/90/90, Methodical, Quality-focused):
  MaterialQuality = 0.9 × 0.95 × 0.9 × 1.1 × 1.15 = 0.97 (97% quality)

Good Refiner (Skill 75, Stats 70/70/70, Standard):
  MaterialQuality = 0.9 × 0.75 × 0.7 × 1.0 = 0.47 (47% quality)

Poor Refiner (Skill 40, Stats 50/50/50, Chaotic):
  MaterialQuality = 0.9 × 0.40 × 0.5 × 0.9 = 0.16 (16% quality)
```

---

### Component Build Quality (Craftsman Skills)

**Build quality depends on craftsmen** who construct/assemble components from materials.

**Component Construction:**
```
BuildQuality = MaterialQuality × CraftsmanSkillFactor × CraftsmanStatsFactor × ConstructionQuality

Where:
  MaterialQuality = 0.0-1.0 (quality of materials from refiners)
  CraftsmanSkillFactor = CraftsmanSkill / 100 (0.0-1.0, craftsman's construction skill)
  CraftsmanStatsFactor = (Intelligence + Finesse + Diligence) / 300 (stat contribution)
  ConstructionQuality = 0.8-1.2 (construction facility quality, tools, conditions)
```

**Craftsman Influence:**
- **Craftsman Skill:** Primary skill affecting build quality (0-100)
- **Stats:** Intelligence (precision), Finesse (manual dexterity), Diligence (consistency)
- **Behavior Profile:** Methodical (+10% quality), Perfectionist (+20% quality, -30% speed)
- **Outlook Profile:** Quality-focused (+15% quality), Practical-focused (+10% quality, +10% reliability)

**Build Quality Examples:**
```
Excellent Craftsman (Skill 95, Stats 90/95/90, Methodical, Quality-focused):
  BuildQuality = 0.97 × 0.95 × 0.92 × 1.1 × 1.15 = 1.07 (107% quality, capped at 100%)

Good Craftsman (Skill 75, Stats 70/75/70, Standard):
  BuildQuality = 0.47 × 0.75 × 0.72 × 1.0 = 0.25 (25% quality)

Poor Craftsman (Skill 40, Stats 50/45/50, Chaotic):
  BuildQuality = 0.16 × 0.40 × 0.48 × 0.9 = 0.03 (3% quality)
```

---

### Tech Implementation Quality (Research Quality)

**Tech implementation quality depends on researchers** who initially unlock/develop the technology.

**Tech Unlock Quality:**
```
TechImplementationQuality = ResearchQuality × ResearcherSkillFactor × ResearcherStatsFactor × ResearchFacilityQuality

Where:
  ResearchQuality = 0.5-1.0 (base research quality from discovery process)
  ResearcherSkillFactor = ResearcherSkill / 100 (0.0-1.0, researcher's tech skill)
  ResearcherStatsFactor = (Intelligence + Wisdom + Creativity) / 300 (stat contribution)
  ResearchFacilityQuality = 0.8-1.2 (research facility quality, equipment, conditions)
```

**Researcher Influence (Initial Tech Unlock):**
- **Researcher Skill:** Primary skill affecting tech implementation quality (0-100)
- **Stats:** Intelligence (analysis), Wisdom (practical application), Creativity (innovation)
- **Behavior Profile:** Methodical (+10% quality), Innovative (+15% experimental aspects)
- **Outlook Profile:** Innovation-focused (+15% quality), Theoretical-focused (+10% efficiency)

**Tech Implementation Quality Examples:**
```
Excellent Researcher (Skill 95, Stats 95/90/95, Methodical, Innovation-focused):
  TechImplementationQuality = 0.9 × 0.95 × 0.93 × 1.1 × 1.15 = 1.0 (100% quality)

Good Researcher (Skill 75, Stats 75/70/75, Standard):
  TechImplementationQuality = 0.9 × 0.75 × 0.73 × 1.0 = 0.49 (49% quality)

Poor Researcher (Skill 40, Stats 50/45/50, Chaotic):
  TechImplementationQuality = 0.9 × 0.40 × 0.48 × 0.9 = 0.16 (16% quality)
```

---

### Tech Optimization (Reroll Mechanics)

**Researchers can optimize existing tech** by "rerolling" tech parameters to improve performance.

**Reroll Process:**
```
OptimizationAttempt = 
    CurrentTechQuality × OptimizationPotential × ResearcherSkillFactor × OptimizationTime

Where:
  CurrentTechQuality = 0.0-1.0 (current tech implementation quality)
  OptimizationPotential = 0.1-0.3 (potential improvement per reroll, decreases with optimization)
  ResearcherSkillFactor = ResearcherSkill / 100 (0.0-1.0, researcher's optimization skill)
  OptimizationTime = Time spent on optimization (weeks, months)
```

**Reroll Outcomes:**

**1. Successful Optimization**
- **Probability:** Based on researcher skill, stats, and current tech quality
- **Improvement:** Tech quality increases (typically 5-15% per successful reroll)
- **Cumulative:** Multiple successful rerolls can optimize tech significantly
- **Diminishing Returns:** Each reroll has less potential improvement than previous

**2. Failed Optimization**
- **Probability:** Inverse of successful optimization
- **Outcome:** No improvement (tech quality unchanged)
- **Risk:** Failed optimizations may degrade tech quality (rare, 1-5% chance)

**3. Breakthrough Optimization**
- **Probability:** Very rare (1-5% chance, depends on researcher creativity/innovation)
- **Improvement:** Significant tech quality increase (20-50%)
- **Requires:** High researcher creativity, innovation-focused outlook, excellent research facilities

**Reroll Formula:**
```
NewTechQuality = CurrentTechQuality + (OptimizationGain × SuccessProbability)

Where:
  OptimizationGain = OptimizationPotential × ResearcherSkillFactor × OptimizationTime
  SuccessProbability = ResearcherSkillFactor × ResearcherStatsFactor × CurrentTechQuality
```

**Reroll Examples:**
```
Tech Reroll Attempt 1:
  Current Quality: 70%
  Researcher Skill: 85
  Optimization Potential: 20%
  Time: 4 weeks
  Optimization Gain: 0.20 × 0.85 × 1.0 = 17%
  Success Probability: 0.85 × 0.85 × 0.70 = 51%
  Result: Success! New Quality: 87% (+17%)

Tech Reroll Attempt 2 (on same tech):
  Current Quality: 87%
  Researcher Skill: 85
  Optimization Potential: 15% (diminished)
  Time: 6 weeks
  Optimization Gain: 0.15 × 0.85 × 1.2 = 15%
  Success Probability: 0.85 × 0.85 × 0.87 = 63%
  Result: Success! New Quality: 95% (+8%, capped near maximum)

Tech Reroll Attempt 3 (diminishing returns):
  Current Quality: 95%
  Researcher Skill: 90
  Optimization Potential: 5% (much diminished)
  Time: 8 weeks
  Optimization Gain: 0.05 × 0.90 × 1.5 = 7%
  Success Probability: 0.90 × 0.90 × 0.95 = 77%
  Result: Success! New Quality: 100% (+5%, capped at maximum)
```

---

### Communications Networks

**Communications networks** transmit information between entities/locations.

**Network Components:**

**1. Communication Nodes**
- **Function:** Transmit/receive communications signals
- **Quality Factors:** Material quality (antenna components), build quality (construction), tech quality (signal processing)
- **Performance:** Range, signal quality, bandwidth, reliability

**2. Communication Links**
- **Function:** Connect communication nodes (wired or wireless)
- **Quality Factors:** Material quality (cables, wireless equipment), build quality (installation), tech quality (signal encoding)
- **Performance:** Signal strength, bandwidth, latency, reliability

**3. Signal Amplifiers/Repeaters**
- **Function:** Boost signals over long distances
- **Quality Factors:** Material quality (amplifier components), build quality (installation), tech quality (amplification efficiency)
- **Performance:** Amplification factor, signal quality preservation, range extension

**Network Quality Effects:**
```
CommunicationRange = BaseRange × NetworkQuality
SignalStrength = BaseSignalStrength × NetworkQuality
Bandwidth = BaseBandwidth × NetworkQuality
Latency = BaseLatency / NetworkQuality (lower is better)
Reliability = BaseReliability × NetworkQuality
```

**Quality Examples:**
```
Excellent Network (100% quality):
  Range: 100% of base range
  Signal Strength: 100% of base strength
  Bandwidth: 100% of base bandwidth
  Latency: 100% of base latency
  Reliability: 99% uptime

Poor Network (30% quality):
  Range: 30% of base range (very limited)
  Signal Strength: 30% of base strength (weak signals)
  Bandwidth: 30% of base bandwidth (limited data transfer)
  Latency: 333% of base latency (very slow)
  Reliability: 70% uptime (frequent failures)
```

---

### Sensor Networks

**Sensor networks** detect and monitor environmental conditions, entities, events.

**Network Components:**

**1. Sensor Nodes**
- **Function:** Detect environmental conditions, entities, events
- **Quality Factors:** Material quality (sensor components), build quality (installation), tech quality (sensor sensitivity)
- **Performance:** Detection range, sensitivity, accuracy, reliability

**2. Sensor Data Links**
- **Function:** Transmit sensor data to processing centers
- **Quality Factors:** Material quality (data transmission equipment), build quality (installation), tech quality (data encoding)
- **Performance:** Data transmission rate, signal quality, reliability

**3. Processing Centers**
- **Function:** Process and analyze sensor data
- **Quality Factors:** Material quality (processing components), build quality (construction), tech quality (processing algorithms)
- **Performance:** Processing speed, analysis accuracy, data storage capacity

**Network Quality Effects:**
```
DetectionRange = BaseRange × NetworkQuality
SensorSensitivity = BaseSensitivity × NetworkQuality
DetectionAccuracy = BaseAccuracy × NetworkQuality
DataTransmissionRate = BaseRate × NetworkQuality
ProcessingSpeed = BaseSpeed × NetworkQuality
Reliability = BaseReliability × NetworkQuality
```

**Quality Examples:**
```
Excellent Sensor Network (100% quality):
  Detection Range: 100% of base range
  Sensitivity: 100% of base sensitivity (detects weak signals)
  Accuracy: 99% accuracy (very precise)
  Data Transmission: 100% of base rate
  Processing Speed: 100% of base speed
  Reliability: 99% uptime

Poor Sensor Network (25% quality):
  Detection Range: 25% of base range (very limited)
  Sensitivity: 25% of base sensitivity (misses weak signals)
  Accuracy: 60% accuracy (many false positives/negatives)
  Data Transmission: 25% of base rate (slow)
  Processing Speed: 25% of base speed (slow analysis)
  Reliability: 65% uptime (frequent failures)
```

---

### Component Structure (Communications/Sensors)

```csharp
// Network component base
public struct NetworkComponent : IComponentData
{
    public NetworkComponentType Type;          // Communication Node, Sensor Node, Link, Amplifier, etc.
    public FixedString64Bytes TechId;         // Technology identifier
    
    // Quality factors
    public float MaterialQuality;             // 0.0-1.0 (from refiners)
    public float BuildQuality;                // 0.0-1.0 (from craftsmen)
    public float TechImplementationQuality;   // 0.0-1.0 (from researchers, initial unlock)
    public float OptimizationBonus;           // 0.0-0.2 (from tech rerolls)
    public float NetworkQuality;              // 0.0-1.0 (calculated total quality)
    
    // Craftsman/Refiner tracking
    public Entity RefinerEntity;              // Refiner who processed materials (optional)
    public Entity CraftsmanEntity;            // Craftsman who built component (optional)
    public Entity ResearcherEntity;           // Researcher who unlocked tech (optional)
    public Entity OptimizerEntity;            // Researcher who optimized tech (optional, multiple possible)
}

// Tech optimization project (ongoing reroll)
public struct TechOptimizationProject : IComponentData
{
    public Entity ResearcherEntity;           // Researcher conducting optimization
    public FixedString64Bytes TechId;        // Technology being optimized
    public float CurrentTechQuality;          // Current tech implementation quality
    public float OptimizationPotential;       // Potential improvement (diminishes with optimization)
    public float OptimizationProgress;        // 0.0-1.0 (progress toward completion)
    public float OptimizationTime;            // Time spent on optimization (weeks)
    public byte RerollAttemptCount;           // Number of rerolls attempted on this tech
}

// Network performance (calculated from quality)
public struct NetworkPerformance : IComponentData
{
    public float Range;                       // Detection/communication range
    public float SignalStrength;              // Signal strength (for communications)
    public float Bandwidth;                   // Data transmission bandwidth
    public float Latency;                     // Signal/data latency
    public float Sensitivity;                 // Sensor sensitivity (for sensors)
    public float Accuracy;                    // Detection/measurement accuracy
    public float ProcessingSpeed;             // Processing speed (for sensor networks)
    public float Reliability;                 // 0.0-1.0 (uptime, failure rate)
}
```

---

## Prerequisite Quality Dependencies and Research Motivation

### Quality-Based Prerequisites

**Tech quality affects prerequisite requirements** - high-quality prerequisites unlock advanced tech easier, while low-quality prerequisites create problems that motivate improvement research.

**Core Concept:**
- **Prerequisite Quality:** The quality of prerequisite tech affects difficulty of unlocking dependent tech
- **Quality Bonuses:** High-quality prerequisites reduce research difficulty (easier to unlock related tech)
- **Quality Penalties:** Low-quality prerequisites increase research difficulty (harder to unlock related tech)
- **Research Motivation:** Low-quality tech creates problems/urges that motivate entities to research improvements or alternatives

---

### Prerequisite Quality Effects

**Prerequisite Quality Modifies Research Difficulty:**
```
ResearchDifficulty = BaseDifficulty × PrerequisiteQualityModifier

Where:
  BaseDifficulty = Base research difficulty for tech unlock
  PrerequisiteQualityModifier = 
    0.5-0.8 (Excellent prerequisites, -20% to -50% difficulty)
    0.9-1.1 (Good prerequisites, -10% to +10% difficulty)
    1.2-1.5 (Poor prerequisites, +20% to +50% difficulty)
    1.5-2.0 (Substandard prerequisites, +50% to +100% difficulty)
```

**Quality Modifier Calculation:**
```
PrerequisiteQualityModifier = 1.0 - (PrerequisiteQuality - 0.5) × 0.6

Where:
  PrerequisiteQuality = 0.0-1.0 (quality of prerequisite tech)
  
Examples:
  Excellent Prerequisite (100% quality):
    Modifier = 1.0 - (1.0 - 0.5) × 0.6 = 0.7 (30% easier)
  
  Good Prerequisite (75% quality):
    Modifier = 1.0 - (0.75 - 0.5) × 0.6 = 0.85 (15% easier)
  
  Standard Prerequisite (50% quality):
    Modifier = 1.0 - (0.5 - 0.5) × 0.6 = 1.0 (no change)
  
  Poor Prerequisite (30% quality):
    Modifier = 1.0 - (0.3 - 0.5) × 0.6 = 1.12 (12% harder)
  
  Substandard Prerequisite (20% quality):
    Modifier = 1.0 - (0.2 - 0.5) × 0.6 = 1.18 (18% harder)
```

---

### Research Motivation System

**Low-quality tech creates problems** that motivate entities to research improvements or alternatives.

**Motivation Mechanics:**
```
ResearchMotivation = ProblemSeverity × EntityAwareness × ResearchCapability × ProblemUrgency

Where:
  ProblemSeverity = 0.0-1.0 (severity of problems from low-quality tech)
  EntityAwareness = 0.0-1.0 (how aware entities are of problems)
  ResearchCapability = 0.0-1.0 (entity's ability to conduct research)
  ProblemUrgency = 0.0-1.0 (urgency of solving problem)
```

**Motivation Thresholds:**
```
ResearchMotivation > 0.7: Strong Motivation (high priority research, entities actively seek solutions)
ResearchMotivation > 0.5: Moderate Motivation (research considered, may pursue if resources available)
ResearchMotivation > 0.3: Weak Motivation (research possible, low priority)
ResearchMotivation < 0.3: No Motivation (problems not severe enough to warrant research)
```

---

### Technical Tech Examples

**Example 1: Generator Filters (Dirty Generators)**

**Initial Tech Unlock:**
```
Tech: Basic Generator
  Quality: 30% (poor, substandard research)
  Problems:
    - Dirty output (pollution, waste)
    - Low efficiency (excessive waste)
    - Health hazards (toxic emissions)
    - Environmental damage (corruption spread)
  
ProblemSeverity = 0.8 (high severity, health and environmental problems)
EntityAwareness = 0.9 (entities clearly aware of problems)
ResearchCapability = 0.7 (entities have research capability)
ProblemUrgency = 0.8 (urgent, health problems)

ResearchMotivation = 0.8 × 0.9 × 0.7 × 0.8 = 0.40 (moderate-strong motivation)
```

**Motivated Research:**
```
Option A: Improve Existing Tech
  Research: Generator Filters
    Prerequisite: Basic Generator (30% quality, poor)
    BaseDifficulty: 100 (moderate)
    PrerequisiteQualityModifier: 1.12 (12% harder due to poor prerequisite)
    ActualDifficulty: 112 (increased due to poor base tech)
    Motivation: Strong (0.40, health and environmental problems)
    Outcome: Entities research filters to clean generator output
    
Option B: Alternative Tech
  Research: Clean Generator Alternative
    Prerequisite: Basic Generator (30% quality, poor)
    BaseDifficulty: 150 (high, alternative design)
    PrerequisiteQualityModifier: 1.12 (12% harder due to poor prerequisite)
    ActualDifficulty: 168 (increased)
    Motivation: Moderate (0.40, but alternative more expensive)
    Outcome: Entities may research clean alternative if filters insufficient
```

**High-Quality Alternative:**
```
Tech: Basic Generator
  Quality: 95% (excellent research)
  Problems:
    - Minimal problems (minor inefficiencies)
    - No health hazards
    - No environmental damage
  
ProblemSeverity = 0.1 (low severity, minor issues)
ResearchMotivation = 0.1 × 0.9 × 0.7 × 0.2 = 0.01 (no motivation)

Advanced Tech Research:
  Research: Advanced Generator
    Prerequisite: Basic Generator (95% quality, excellent)
    BaseDifficulty: 200 (high)
    PrerequisiteQualityModifier: 0.7 (30% easier due to excellent prerequisite)
    ActualDifficulty: 140 (reduced due to excellent base tech)
    Outcome: Entities easily research advanced generators from excellent base
```

---

### Cultural Tech Examples

**Example 2: Hand-Washing → Soap (Poor Hygiene)**

**Initial Tech Unlock:**
```
Tech: Basic Hand-Washing
  Quality: 25% (poor, half-assed methods)
  Methods:
    - Rinsing with water only (no soap)
    - Incomplete washing (rushed, ineffective)
    - Poor technique (misses areas)
  
Problems:
    - Ineffective hygiene (doesn't remove bacteria/germs)
    - Disease spread (contamination continues)
    - Health problems (infections, illness)
  
ProblemSeverity = 0.7 (moderate-high severity, health problems)
EntityAwareness = 0.8 (entities aware of hygiene problems)
ResearchCapability = 0.6 (basic research capability)
ProblemUrgency = 0.7 (moderate urgency, recurring health problems)

ResearchMotivation = 0.7 × 0.8 × 0.6 × 0.7 = 0.24 (weak-moderate motivation)
```

**Motivated Research:**
```
Research: Soap Production
  Prerequisite: Basic Hand-Washing (25% quality, poor)
  BaseDifficulty: 80 (moderate, cultural tech)
  PrerequisiteQualityModifier: 1.15 (15% harder due to poor prerequisite)
  ActualDifficulty: 92 (increased)
  Motivation: Moderate (0.24, health problems motivate soap research)
  Outcome: Entities research soap to improve hand-washing effectiveness
  
Improved Tech:
  Tech: Improved Hand-Washing (with Soap)
    Quality: 75% (good, proper hygiene with soap)
    Methods:
      - Washing with soap
      - Proper technique
      - Complete washing
    Problems:
      - Minor issues (could be more thorough)
    Outcome: Significantly improved hygiene, reduced disease spread
```

**High-Quality Alternative:**
```
Tech: Basic Hand-Washing
  Quality: 90% (excellent, thorough methods)
  Methods:
    - Proper water usage
    - Thorough washing technique
    - Complete coverage
  
Problems:
    - Very minor issues (could use soap for better results)
  
ProblemSeverity = 0.2 (low severity)
ResearchMotivation = 0.2 × 0.8 × 0.6 × 0.3 = 0.03 (no motivation)

Advanced Cultural Tech:
  Research: Advanced Hygiene Practices
    Prerequisite: Basic Hand-Washing (90% quality, excellent)
    BaseDifficulty: 120 (high, advanced cultural tech)
    PrerequisiteQualityModifier: 0.76 (24% easier due to excellent prerequisite)
    ActualDifficulty: 91 (reduced)
    Outcome: Entities easily research advanced hygiene from excellent base
```

---

### Motivation Triggers

**Problems from Low-Quality Tech Create Motivation:**

**1. Health Problems**
- **Severity:** High (0.7-0.9)
- **Urgency:** High (0.7-0.9)
- **Examples:** Toxic emissions, ineffective hygiene, contaminated food
- **Research Response:** Entities research health solutions, filters, alternatives

**2. Efficiency Problems**
- **Severity:** Moderate (0.5-0.7)
- **Urgency:** Moderate (0.4-0.7)
- **Examples:** Low efficiency, wasted resources, poor performance
- **Research Response:** Entities research efficiency improvements, optimization

**3. Environmental Problems**
- **Severity:** Moderate-High (0.6-0.8)
- **Urgency:** Moderate (0.5-0.7)
- **Examples:** Pollution, corruption spread, environmental damage
- **Research Response:** Entities research environmental solutions, cleaner alternatives

**4. Safety Problems**
- **Severity:** High (0.8-0.9)
- **Urgency:** High (0.8-0.9)
- **Examples:** Explosion risks, structural failures, safety hazards
- **Research Response:** Entities research safety improvements, safer alternatives

**5. Reliability Problems**
- **Severity:** Moderate (0.5-0.7)
- **Urgency:** Moderate (0.4-0.6)
- **Examples:** Frequent failures, unreliable operation, breakdowns
- **Research Response:** Entities research reliability improvements, more reliable alternatives

---

### Research Path Branching

**Low-quality tech creates branching research paths:**

**Path A: Improvement Research**
- **Goal:** Improve existing low-quality tech
- **Example:** Add filters to dirty generator, improve hand-washing with soap
- **Difficulty:** Moderate (based on prerequisite quality)
- **Motivation:** Strong if problems are severe

**Path B: Alternative Research**
- **Goal:** Research alternative tech to replace low-quality tech
- **Example:** Clean generator alternative, advanced hygiene methods
- **Difficulty:** Higher (alternative design, but may benefit from understanding problems)
- **Motivation:** Moderate-High if improvements insufficient

**Path C: Optimization Research**
- **Goal:** Optimize existing tech (reroll mechanics)
- **Example:** Optimize generator efficiency, optimize hygiene methods
- **Difficulty:** Based on optimization mechanics (previous section)
- **Motivation:** Moderate if tech is functional but could be better

---

### Entity Behavior and Motivation

**Entities Evaluate Research Motivation Based On:**

**1. Problem Awareness**
- **High Awareness:** Entities directly experience problems (health issues, failures)
- **Moderate Awareness:** Entities observe problems (contamination, inefficiency)
- **Low Awareness:** Entities unaware or underestimate problems

**2. Research Capability**
- **High Capability:** Skilled researchers, good facilities, resources available
- **Moderate Capability:** Basic researchers, adequate facilities
- **Low Capability:** Limited researchers, poor facilities, resource constraints

**3. Problem Urgency**
- **High Urgency:** Immediate threats (health hazards, safety risks)
- **Moderate Urgency:** Ongoing problems (inefficiency, reliability issues)
- **Low Urgency:** Minor issues (optimization opportunities)

**4. Outlook Profile**
- **Innovation-Focused:** More likely to research improvements/alternatives
- **Practical-Focused:** Research solutions to immediate problems
- **Conservative:** Reluctant to change, may tolerate problems
- **Quality-Focused:** Strong motivation to improve poor-quality tech

---

### Component Structure (Prerequisites and Motivation)

```csharp
// Tech prerequisite tracking
public struct TechPrerequisite : IComponentData
{
    public FixedString64Bytes PrerequisiteTechId; // Required prerequisite tech
    public float PrerequisiteQuality;             // 0.0-1.0 (quality of prerequisite)
    public float QualityModifier;                 // 0.5-2.0 (difficulty modifier based on quality)
    public bool IsRequired;                       // True if required, false if optional
}

// Research motivation state
public struct ResearchMotivationState : IComponentData
{
    public FixedString64Bytes ProblemTechId;      // Tech causing problems
    public float ProblemSeverity;                 // 0.0-1.0 (severity of problems)
    public float EntityAwareness;                 // 0.0-1.0 (entity awareness of problems)
    public float ProblemUrgency;                  // 0.0-1.0 (urgency of solving problems)
    public float ResearchMotivation;              // 0.0-1.0 (calculated motivation score)
    public FixedString64Bytes TargetResearchId;   // Research to solve problem (improvement or alternative)
}

// Problem tracking (from low-quality tech)
public struct TechProblemTracker : IComponentData
{
    public FixedString64Bytes TechId;             // Tech with problems
    public float TechQuality;                     // 0.0-1.0 (quality of problematic tech)
    public ProblemType ProblemType;               // Health, Efficiency, Environmental, Safety, Reliability
    public float ProblemSeverity;                 // 0.0-1.0 (severity of problems)
    public float ProblemDuration;                 // Time problems have existed
    public bool MotivatedResearch;                // True if research motivated
}

// Problem types
public enum ProblemType : byte
{
    Health,         // Health problems (toxic emissions, contamination, disease)
    Efficiency,     // Efficiency problems (waste, low performance)
    Environmental,  // Environmental problems (pollution, corruption)
    Safety,         // Safety problems (explosions, failures, hazards)
    Reliability     // Reliability problems (frequent failures, breakdowns)
}
```

---

## Open Questions

1. **Power Alignment:** Should power have alignment variants, or remain neutral?
2. **Conversion Costs:** Exact conversion costs and efficiency losses (if conversion implemented)?
3. **Alignment Spread:** How does corruption/purity spread from Fel/Arcane energy? (gradual, instant, threshold-based)
4. **Network Complexity:** How complex should mana networks be? (simple vs. complex routing)
5. **Battery Types:** Should batteries support multiple alignments, or single alignment only?
6. **Entity Corruption:** How does Fel energy corrupt entities when mismatched? (gradual, instant, threshold-based)
7. **Stability Mechanics:** How exactly does instability manifest? (random fluctuations, failures, reduced performance)
8. **Alignment Effect Scaling:** How do alignment effects scale with mismatched alignments? (reduced, amplified, conflicted)
9. **Research Balance:** How fast should research progress? (days, weeks, months per optimization)
10. **Technology Limits:** Are there theoretical limits to optimization? (maximum energy density, efficiency caps)
11. **Hybrid Complexity:** How complex can hybrid technologies be? (2 components, 3+ components, unlimited?)
12. **Technology Sharing:** How do technologies spread between entities/factions? (trade, research, espionage)

---

## Related Documentation

- **Power and Battery System:** `puredots/Docs/Concepts/Core/Power_And_Battery_System.md`
- **Power Management:** `puredots/Docs/Concepts/Combat/Power_Management_Agnostic.md`
- **Prayer Power:** `puredots/Packages/com.moni.puredots/Runtime/Runtime/PrayerPowerComponents.cs`
- **Module Overcharge:** `godgame/Docs/Concepts/Combat/Module_Overcharge_System.md`

