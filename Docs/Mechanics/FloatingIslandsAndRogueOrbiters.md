# Mechanic: Floating Islands & Rogue Orbiters

## Overview

**Status**: Concept
**Complexity**: Moderate
**Category**: Exploration / Events / Loot

**One-line description**: *Temporary, mobile locations (floating islands in Godgame, rogue celestial objects in Space4X) that appear for limited time, offering unique loot, dungeons, and exploration opportunities.*

## Core Concept

The world is not static - special locations **come and go** on unpredictable schedules. These mobile zones offer high-risk, high-reward exploration:
- **Godgame**: Floating islands drift through the sky, landing near villages for limited time
- **Space4X**: Rogue planets, extragalactic visitors, alien megastructures, or special asteroids pass through the system

Players must react quickly to capitalize on these opportunities before they vanish. Some arrivals are benevolent (treasure, allies), others hostile (invasions, curses).

## How It Works

### Basic Rules

1. **Arrival**: Floating island/orbiter appears at random or on schedule (e.g., comet returns every 100 years)
2. **Docking/Landing**: Location becomes accessible for limited duration
3. **Exploration**: Entities can travel to location, explore, fight, loot
4. **Departure Warning**: Location signals imminent departure (visual cues, time warnings)
5. **Departure**: Location vanishes - entities still aboard are carried away (or lost)

### Godgame: Floating Islands

#### Island Types

| Island Type | Size | Duration | Contents | Frequency |
|------------|------|----------|----------|-----------|
| **Treasure Isle** | Small | 1-3 days | Chests, rare resources | Common (monthly) |
| **Dungeon Isle** | Medium | 3-7 days | Monster lair, boss fight | Uncommon (seasonal) |
| **Merchant Isle** | Medium | 5-10 days | Exotic traders, rare goods | Uncommon (seasonal) |
| **Mythic Isle** | Large | 10-30 days | Legendary artifacts, epic quests | Rare (yearly) |
| **Cursed Isle** | Varied | Until cleared | Hostile forces, corruption | Event-triggered |
| **Sanctuary Isle** | Small | 7-14 days | Safe haven, healing springs | Rare (random) |

#### Island Behavior

- **Drift Pattern**: Islands drift slowly across sky, visible from afar
- **Landing**: Islands descend near villages, become accessible via ladders, ropes, or flight miracles
- **Tethering**: Villages can attempt to tether island (magical anchors, chains) to extend duration (risky - may anger island spirit)
- **Departure**: Island ascends and floats away, returning to sky realm

#### Example: Dungeon Isle

- **Arrival**: Large island appears on horizon, drifts toward village over 1 day
- **Landing**: Island hovers 50m above village square, ladder descends
- **Contents**: Multi-level dungeon with monsters, traps, treasure chamber
- **Boss Fight**: Ancient guardian at deepest level, drops legendary weapon
- **Duration**: 5 days accessible
- **Departure Warning**: Island shudders, ladder retracts (1-hour warning)
- **Departure**: Island ascends, fades into clouds
- **Consequence**: Villagers still on island are lost (or return days later with strange stories)

### Space4X: Rogue Orbiters & Celestial Anomalies

#### Orbiter Types

| Orbiter Type | Scale | Duration | Contents | Frequency |
|-------------|-------|----------|----------|-----------|
| **Rogue Asteroid** | Small | 1-5 days | Rich ore veins, salvage | Common (monthly) |
| **Extragalactic Comet** | Medium | 3-10 days | Exotic matter, alien tech | Uncommon (yearly) |
| **Rogue Planet** | Large | 10-30 days | Colonizable, ancient ruins | Rare (once per campaign) |
| **Alien Megastructure** | Massive | 5-15 days | Alien AI, supertech, hazards | Very rare (event) |
| **Derelict Fleet** | Varied | 3-7 days | Salvageable ships, crew survivors | Uncommon (event) |
| **Dimensional Rift** | N/A | 1-3 days | Gateway to alternate space, unknowable loot | Very rare (random) |

#### Orbiter Behavior

- **Detection**: Sensors detect incoming object days/weeks in advance
- **Trajectory**: Object follows predictable orbital path, closest approach calculated
- **Interception**: Fleets must maneuver to intercept during closest approach window
- **Exploration**: Land on surface, board derelict, scan megastructure
- **Departure**: Object continues on trajectory, leaves system (or enters orbit if captured)

#### Example: Alien Megastructure

- **Detection**: Sensors detect massive object approaching from extragalactic space (30 days out)
- **Anticipation**: Factions scramble to prepare fleets, research teams
- **Arrival**: Ringworld-class structure enters outer system, trajectory analysis shows 10-day window
- **Interception**: Multiple factions send expeditions
- **Exploration**: Structure is ancient, automated defenses active, valuable tech inside
- **Conflict**: Factions compete for control, some fight, others cooperate
- **Departure**: Structure activates FTL drive, vanishes (or enters stable orbit if captured)
- **Consequence**: Factions that secured tech gain massive advantage

### Parameters and Variables

| Parameter | Default Value | Range | Effect |
|-----------|--------------|-------|--------|
| **Appearance Frequency** | 1/month (common) | 1/week - 1/year | How often islands/orbiters appear |
| **Duration (Common)** | 3 days | 1-10 days | How long accessible |
| **Duration (Rare)** | 15 days | 5-30 days | Legendary orbiters last longer |
| **Detection Warning (Space4X)** | 7 days | 1-30 days | How early sensors detect arrival |
| **Tether Success Chance (Godgame)** | 30% | 10-70% | Chance village successfully extends duration |
| **Loot Quality Multiplier** | 2.0x | 1.5x-5.0x | How much better loot is than normal |
| **Difficulty Multiplier** | 1.5x | 1.0x-3.0x | How much harder content is |

### Edge Cases

- **Island Departs While Entities Aboard (Godgame)**:
  - Entities are carried away, may return later (quest hook - rescue mission)
  - Entities lost permanently (harsh penalty)
  - Entities teleport to safety (player miracle intervention)
- **Multiple Factions Race to Orbiter (Space4X)**:
  - First-come-first-served? Or contested zone?
  - Diplomatic incident if one faction "steals" orbiter from another
- **Tether Attempt Fails (Godgame)**:
  - Island becomes hostile, attacks village
  - Island departs immediately (angered)
  - Tether breaks during occupation, some entities stranded
- **Orbiter Captured and Held (Space4X)**:
  - If faction can stabilize orbit (gravity tethers, tugs), object becomes permanent feature
  - Requires significant investment but grants exclusive access

## Player Interaction

### Player Decisions (Godgame)

- **Send Villagers to Explore?**: Risk villager lives for potential treasure
- **Tether Island?**: Extend duration but risk angering island spirit
- **Miracle Support**: Use miracles to aid villagers during exploration (heal, protect)
- **Ignore or Engage**: Some islands are traps - decide if worth the risk

### Player Decisions (Space4X)

- **Invest in Detection**: Upgrade sensors to get earlier warnings
- **Scramble Fleet?**: Divert military assets to intercept (leaves other areas vulnerable)
- **Cooperate or Compete?**: Ally with other factions or race to claim alone
- **Capture or Loot**: Attempt to capture orbiter permanently or just grab loot and leave

### Skill Expression

- **Timing**: Skilled players prepare in advance (resource stockpiles, standby fleets)
- **Risk Assessment**: Knowing which islands/orbiters are worth the danger
- **Tether Management**: Balancing extended duration vs. angering island
- **Fleet Positioning**: Pre-positioning fleets along likely trajectories (Space4X)
- **Rescue Operations**: Extracting entities before departure deadline

### Feedback to Player

- **Visual feedback**:
  - Island/orbiter appears on horizon (Godgame: clouds part, Space4X: sensor blip)
  - Countdown timer shows time remaining
  - Departure warnings (island shudders, orbiter trajectory shifts)
  - Distinct visual style per island/orbiter type
- **Numerical feedback**:
  - Time remaining (days, hours)
  - Loot quality estimate
  - Danger level estimate
  - Entities currently aboard count
- **Audio feedback**:
  - Arrival fanfare (mysterious, ominous, or triumphant depending on type)
  - Departure countdown warnings (bell tolls, alarm klaxon)
  - Ambient music on island/orbiter (distinct from normal gameplay)

## Balance and Tuning

### Balance Goals

1. **Time Pressure**: Enough time to explore but not trivialize content
2. **Risk vs Reward**: High-value loot justifies danger and urgency
3. **Frequency**: Common enough to feel like regular events, rare enough to stay exciting
4. **Fairness**: All factions get reasonable access (not dominated by fastest/strongest)

### Tuning Knobs

1. **Appearance Frequency**: More frequent = more content but less special, less frequent = more exciting but sparse
2. **Duration**: Longer = less pressure but less exciting, shorter = more exciting but frustrating
3. **Detection Warning (Space4X)**: Longer warning = more prep time, shorter = more reactive gameplay
4. **Loot Quality**: Higher quality = more motivation, but risks trivializing normal content
5. **Departure Penalty**: Harsh penalty (lose entities) = high stakes, lenient = low stakes

### Known Issues

- **Frequency Balance**: If too common, becomes routine farming; if too rare, feels like missed opportunities
- **Unfair Access**: Faster factions (air travel in Godgame, fast fleets in Space4X) dominate content
- **Departure Griefing**: Players might intentionally strand rival entities on departing island/orbiter
- **Capture Meta**: If capturing orbiters is too strong, becomes mandatory strategy (all resources diverted to capture)

## Integration with Other Systems

### Interacts With

| System/Mechanic | Type of Interaction | Priority |
|----------------|---------------------|----------|
| **Time System** | Islands/orbiters on schedule, countdown timers | High |
| **Loot System** | Islands/orbiters drop high-quality loot | High |
| **Quest System** | Islands can trigger quests (clear dungeon, rescue stranded) | Medium |
| **Faction System** | Factions compete for access, diplomatic incidents | High |
| **Pathfinding** | Entities navigate to island/orbiter | Medium |
| **Event System** | Arrivals are scripted or procedural events | Medium |
| **Sensor System (Space4X)** | Detection range determines warning time | High |

### Emergent Possibilities

- **Island Trade Routes**: Merchant isles create temporary trade hubs, villages compete to host
- **Orbiter Wars**: Factions fight over control of valuable rogue planet, winner gains permanent colony
- **Tether Chains**: Multiple villages cooperate to tether single mythic isle, share loot
- **Departure Escapes**: Entities intentionally board departing island to flee persecution (refugee mechanic)
- **Recurring Visitors**: Some orbiters return on predictable schedule, factions plan expeditions years in advance
- **Cursed Island Spread**: Ignoring cursed isle allows corruption to spread to nearby villages

## Implementation Notes

### Technical Approach

**Floating Island/Orbiter Entity**:
```csharp
// Mobile Location Definition
public struct FloatingLocation : IComponentData {
    public LocationType Type; // Treasure, Dungeon, Merchant, etc.
    public float3 CurrentPosition; // Current world position
    public float TimeRemaining; // Seconds until departure
    public bool IsAccessible; // Has landed/docked
    public float LootQualityMult; // How good loot is
}

// Arrival Event
public struct LocationArrivalEvent : IComponentData {
    public Entity LocationEntity;
    public float3 ArrivalPosition;
    public float ArrivalTime; // When it arrives (future time)
}

// Entities Aboard Tracker
public struct EntitiesAboard : IBufferElementData {
    public Entity Entity; // Who is on this island/orbiter
}

// Tether Attempt (Godgame)
public struct TetherAttempt : IComponentData {
    public Entity Island;
    public Entity Village;
    public float SuccessChance;
}
```

**System Flow**:
1. **LocationSpawnSystem**: Procedurally generates or schedules arrival events
2. **LocationMovementSystem**: Moves islands/orbiters along drift/trajectory paths
3. **LocationAccessSystem**: Handles landing/docking (makes accessible), departure (locks out)
4. **EntitiesBoardingSystem**: Tracks which entities board, prevents boarding after departure warning
5. **DepartureSystem**: Handles departure logic:
   - Teleport entities to safety (lenient)
   - Carry entities away (harsh, quest hook)
   - Destroy entities (very harsh)
6. **TetherSystem (Godgame)**: Resolves tether attempts, extends duration or triggers backlash

### Godgame-Specific: Island Visuals

- Islands float in sky, visible from distance (cloud layer object)
- When accessible, ladder/rope descends to ground (interaction point)
- Island tilts, shudders during departure warning
- Disappears with particle effect (fade, beam of light, etc.)

### Space4X-Specific: Trajectory Prediction

- Sensor system calculates trajectory, displays intercept window on starmap
- Fleets plot intercept courses, travel time calculated
- If orbiter is capturable, requires massive tugs/gravity tethers (new ship type or module)

### Performance Considerations

- **Floating Entities**: Islands/orbiters are single entities, not complex terrain (unless explored - then load interior)
- **Departure Cleanup**: Efficiently unload interior scenes when location departs
- **Trajectory Calculations**: Cache predicted paths, recalculate only on significant gravity perturbations

### Testing Strategy

1. **Unit tests for**:
   - Arrival scheduling (frequency, randomness)
   - Countdown timers (accurate time remaining)
   - Entities aboard tracking (boarding, disembarking, stranding)
   - Tether success calculations

2. **Playtests should verify**:
   - Arrivals feel exciting and rewarding
   - Time pressure is engaging, not frustrating
   - Departure warnings are clear and timely
   - Loot quality justifies risk

3. **Balance tests should measure**:
   - Average loot value vs normal gameplay
   - Frequency of arrivals per game hour
   - Percentage of entities lost to departures (should be low unless player is careless)
   - Tether success rate vs risk

## Examples

### Example Scenario 1: Treasure Isle Arrival (Godgame)

**Setup**: Small village (pop 30), peaceful era. Treasure Isle appears on horizon.
**Action**:
- Island drifts toward village over 2 days (visible, builds anticipation)
- Island lands, ladder descends
- Player sends 5 villagers to explore
**Result**:
- Villagers find 3 chests: gold coins, rare spices, enchanted tool
- Exploration takes 6 hours (game time)
- Countdown shows 2.5 days remaining - plenty of time
- Villagers return safely with loot
- Village celebrates, faith increases
- Island departs on schedule, fades into clouds

### Example Scenario 2: Dungeon Isle with Tether Attempt (Godgame)

**Setup**: Large village (pop 120), warrior culture. Dungeon Isle appears, offers legendary weapon.
**Action**:
- Village sends 15 warriors to explore (3 days duration)
- Warriors fight through dungeon, reach boss on day 2
- Boss fight takes 8 hours, 3 warriors die, boss defeated
- Legendary sword claimed
- Village elders decide to tether island to allow thorough looting
**Result**:
- Tether attempt: 30% success chance, village commits resources (magical anchors)
- **Roll: Success!**
- Island duration extended by 5 days (now 8 days total from initial arrival)
- Village loots remainder of dungeon (more treasure, rare materials)
- Island spirit tolerates tether but does not return to this village in future (lore consequence)
- After 8 days, tether breaks, island departs

### Example Scenario 3: Rogue Asteroid Race (Space4X)

**Setup**: Two rival factions (Federation, Syndicate) both detect rogue asteroid, rich in rare ore. Intercept window: 4 days.
**Action**:
- Federation scrambles mining fleet (6 ships, 3 days travel time)
- Syndicate scrambles military fleet (4 fast frigates, 2 days travel time)
- Syndicate arrives first, begins mining operations
**Result**:
- Federation fleet arrives 1 day later, finds Syndicate already entrenched
- Federation demands Syndicate leave (diplomatic threat)
- Syndicate refuses, claims salvage rights
- **Player choice (if playing Federation)**:
  - Attack Syndicate (military solution, starts war)
  - Negotiate share (diplomatic solution, split loot)
  - Withdraw (avoid conflict, lose loot)
- **Player chooses: Negotiate**
- Both factions agree to 50/50 split
- Mining operations complete in 3 days (1 day before asteroid departs)
- Both factions gain valuable ore, avoid war
- Asteroid departs on schedule

### Example Scenario 4: Alien Megastructure Capture Attempt (Space4X)

**Setup**: Ringworld megastructure approaches, will be accessible for 10 days. Player faction has developed gravity tether technology (endgame tech).
**Action**:
- Player deploys massive tugboat fleet (12 tugs, expensive)
- Tugs attach to megastructure, begin stabilization burn
- Rival faction attempts to sabotage (sends raiders to destroy tugs)
**Result**:
- Player defends tugs with military escort
- 2 tugs destroyed, but majority survive
- After 5 days of continuous burn, megastructure orbit stabilized
- Megastructure now permanent feature in system (captured!)
- Player gains exclusive access to supertech, research bonuses
- Rival factions protest, diplomatic tensions rise
- **Consequence**: Megastructure becomes player's permanent asset, but creates enemies

## References and Inspiration

- **The Legend of Zelda: Skyward Sword**: Floating islands, sky realm
- **Final Fantasy series**: Airships, floating continents
- **No Man's Sky**: Rogue planets, anomalous systems
- **Spelunky**: Time-pressure exploration (ghost appears if you linger)
- **FTL: Faster Than Light**: Timed events, distress signals
- **Sunless Sea**: Arrival of special ships/islands on schedule

## Godgame-Specific Variations

### Island Types
- **Sanctuary Isle**: Safe zone, cannot be attacked, heals all who visit
- **Cursed Isle**: Spreads corruption if not cleared, hostile entities spawn
- **Mythic Isle**: Contains ancient relics, quest chains, legendary lore
- **Merchant Isle**: Exotic traders from distant lands, rare goods only available here

### Miracle Interactions
- **Summon Island**: High-cost miracle to summon random island early
- **Extend Duration**: Blessing that extends island duration without tether risk
- **Safe Recall**: Miracle to teleport villagers back to surface before departure

## Space4X-Specific Variations

### Orbiter Types
- **Derelict Fleet**: Ancient warships, salvageable for tech or reactivation
- **Dimensional Rift**: Gateway to alternate dimension, unknowable risks/rewards
- **Alien Embassy**: Peaceful contact opportunity, diplomacy with extragalactic species
- **Stellar Nursery**: Temporary region with unique resources, stellar formation events

### Capture Mechanics
- **Gravity Tethers**: Tech to stabilize orbit of rogue objects (late-game capability)
- **Orbital Mechanics**: Realistic trajectory calculations, delta-v requirements
- **Contested Capture**: Multiple factions can attempt capture, highest investment wins

## Revision History

| Date | Change | Reason |
|------|--------|--------|
| 2025-12-01 | Initial draft | Conceptualization capture session |

---

*Last Updated: 2025-12-01*
*Document Owner: Tri-Project Design Team*
