# Space4X Mine Loop Demo Fix Checklist

- **Missing runtime singletons** — `ResourceRegistrySystem` aborts until `ResourceTypeIndex` exists, blocking villager/vessel bootstrap (`Packages/com.moni.puredots/Runtime/Systems/ResourceRegistrySystem.cs:32-48`). Add a `PureDotsConfigAuthoring` GameObject in `Assets/Scenes/Space4XMineLoop.unity` wired to `PureDotsRuntimeConfig.asset` to bake the catalog (see reminder in `Docs/Mining_Demo_Diagnosis.md:5-88`).
- **Scene spawn requests never fire** — only the validation subscene bakes `SceneSpawnAuthoring`, so `SceneSpawnSystem` never receives requests when running Space4X/Mining scenes (`Packages/com.moni.puredots/Runtime/Systems/SceneSpawnSystem.cs:23-108`, `Assets/Scenes/Validation/SubScenes/RewindSandboxSubScene.unity:187`). Add a `SceneSpawnAuthoring` in the active subscene (GameEntities) and point it at `Assets/Scenes/Validation/Prefabs/SceneSpawnProfile.asset`.
- **Demo prefabs lack authoring data** — the fleet and villager demo prefabs contain only a `Transform`, so conversion emits no DOTS entities (`Assets/PureDOTS/Prefabs/Demo/FleetPrefab.prefab:1-33`, `Assets/PureDOTS/Prefabs/Demo/VillagerPrefab.prefab:1-33`). Clone the authored prefabs that ship with `VillagerAuthoring`/`MiningVesselAuthoring` components (example in `Assets/PureDOTS/Prefabs/Villager.prefab:36-70`).
- **GameEntities scene skips authoring components** — `Villager1`, `MiningVessel1`, etc. live in the GameEntities subscene with only `Transform`, so baking produces no runtime entities (`Assets/Scenes/GameEntities.unity:344-507`). Either run the `Space4X > Setup Mining Demo Scene` helper (`Assets/Scripts/Editor/MiningDemoSetupHelper.cs:79-178`) or manually add the authoring components before saving/rebaking.
- **Spawner prefab still resolves to null** — `VillagerSpawnerAuthoring` warns when the prefab reference is missing and the baker stores `Entity.Null`, preventing runtime spawns (`Packages/com.moni.puredots/Runtime/Authoring/VillagerAuthoring.cs:225-241`, `Assets/PureDOTS/Prefabs/VillagerSpawner.prefab:43-47`). Assign `Assets/PureDOTS/Prefabs/Villager.prefab` (or other authored prefab) in the inspector so future spawner passes can instantiate villagers.
- **TempJob allocations leak each frame** — `VesselAISystem` and `VesselTargetingSystem` allocate `NativeList`/`NativeArray` instances with `Allocator.TempJob` and never dispose them, triggering safety shutdowns (`Assets/Scripts/Space4x/Systems/VesselAISystem.cs:82-112`, `Assets/Scripts/Space4x/Systems/VesselTargetingSystem.cs:63-86`). Use `Dispose(state.Dependency)` or `[DeallocateOnJobCompletion]` to release the buffers after scheduling.

- **Follow-up** — once the scene bakes the required singletons and authored prefabs, rerun the Movement/Registry debug systems to confirm villagers acquire jobs and vessels resolve mining targets.
